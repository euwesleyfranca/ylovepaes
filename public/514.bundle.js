/*! For license information please see 514.bundle.js.LICENSE.txt */
(self.webpackChunkylovepaes=self.webpackChunkylovepaes||[]).push([[514],{983:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create,Object.create;var i,o,a=n(448),s=n(886),u=n(594),c=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),h=new a.LL("app","Firebase",c),l="@firebase/app",f="[DEFAULT]",p=((o={})[l]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),d=new u.Yd("@firebase/app"),v=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(t),this.container=new s.H0(e.name),this._addComponent(new s.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw h.create("bad-app-name",{appName:String(s)});if((0,a.r3)(e,s))throw h.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new s.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.r3)(e,t))throw h.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return d.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw h.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.ZB)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var f=l[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.ZB)(e,t)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new s.wA("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion(l,"0.6.20",void 0),t.registerVersion("fire-js","")}(w);const _=w},886:(t,e,n)=>{"use strict";n.d(e,{wA:()=>u,H0:()=>l});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var s=n(448),u=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),c="[DEFAULT]",h=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=c);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new s.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:c,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:c})}catch(t){}try{for(var r=i(this.instancesDeferred.entries()),a=r.next();!a.done;a=r.next()){var s=o(a.value,2),u=s[0],h=s[1],l=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:l});h.resolve(f)}catch(t){}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=c),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return t=this,e=void 0,r=function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(a(a([],o(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),o(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=c),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.instanceIdentifier,a=void 0===r?c:r,s=t.options,u=void 0===s?{}:s,h=this.normalizeInstanceIdentifier(a);if(this.isInitialized(h))throw Error(this.name+"("+h+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:h,options:u});try{for(var f=i(this.instancesDeferred.entries()),p=f.next();!p.done;p=f.next()){var d=o(p.value,2),v=d[0],m=d[1];h===this.normalizeInstanceIdentifier(v)&&m.resolve(l)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return l},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===c?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:c:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),l=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new h(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},594:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{in:()=>o,Yd:()=>l,Ub:()=>f,Am:()=>p});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},448:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>g,ZR:()=>m,r3:()=>w,ne:()=>_,p$:()=>i,ZB:()=>o,m9:()=>E,z$:()=>s,jU:()=>h,ru:()=>l,d:()=>p,w1:()=>d,uI:()=>u,UG:()=>c,b$:()=>f,Mn:()=>v});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};Object.create,Object.create;function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function s(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(s())}function c(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function h(){return"object"==typeof self&&self.self===self}function l(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function p(){return s().indexOf("Electron/")>=0}function d(){var t=s();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v(){return s().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,g.prototype.create),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?y(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new m(i,s,r);return u},t}();function y(t,e){return t.replace(b,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new I(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782),i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function T(){}function E(t){return t&&t._delegate?t._delegate:t}},503:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(983);r.Z.registerVersion("firebase","8.4.1","app")},397:(t,e,n)=>{"use strict";var r=n(983);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(n=n(o=r[t=t[t.length-1]]))!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Qa(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Qa(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++b)}var y="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:_).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t){return t}function k(t,e,n){this.code=R+t,this.message=e||D[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new k(e.substring(R.length),t.message,t.serverResponse):null}S(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var O,R="auth/",D={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function M(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function U(t,e){throw new M("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function V(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}O=P("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(M,L),M.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var q=new F((function(){return new K}),(function(t){t.reset()}));function B(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function K(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=q.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},K.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},K.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},X=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=G(t,e)}function Y(t,e){var n;return(n=0<=(e=G(t,e)))&&Array.prototype.splice.call(t,e,1),n}function J(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function Z(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=u.navigator;if(lt){var ft=lt.userAgent;if(ft){tt=ft;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;U("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===Et&&e||"",this.b=Tt}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(U("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var It,Tt={},Et={};function St(){if(void 0===It){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:A,createScript:A,createScriptURL:A})}catch(t){u.console&&u.console.error(t.message)}It=t}else It=t}return It}function At(t,e){this.a=e===Dt?t:""}function kt(t){return t instanceof At&&t.constructor===At?t.a:(U("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Nt(t,e){var n=_t(t);if(!Rt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new At(t=e?e.createScriptURL(t):t,Dt)}(t=n.replace(Ot,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?_t(t):encodeURIComponent(String(t))})))}At.prototype.sa=!0,At.prototype.ra=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ot=/%{(\w+)}/g,Rt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Dt={};function Ct(t,e){this.a=e===Vt?t:""}function Pt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(U("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ut(t){if(t instanceof Ct)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t))t=new Ct(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&xt.test(e[1])?new Ct(t,Vt):null}return t}function Ft(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Ct(t,Vt))}var Vt={},jt=new Ct("about:invalid#zClosurez",Vt);function qt(t,e,n){this.a=n===Bt?t:""}qt.prototype.sa=!0,qt.prototype.ra=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Kt(t,e,n,r){return t=t instanceof Ct?t:Ft(t),e=e||u,n=n instanceof wt?_t(n):n||"",e.open(Pt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=f;var Wt,Xt,Qt=pt("Opera"),Yt=pt("Trident")||pt("MSIE"),Jt=pt("Edge"),Zt=Jt||Yt,$t=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=(Xt=tt,$t?/rv:([^\);]+)(\)|;)/.exec(Xt):Jt?/Edge\/([\d\.]+)/.exec(Xt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):te?/WebKit\/(\S+)/.exec(Xt):Qt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(re&&(ne=re?re[1]:""),Yt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ht(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ht(0==a[2].length,0==s[2].length)||ht(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}u.document&&Yt?oe=ee()||parseInt(Wt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Xt){}var ce=!Yt||9<=Number(ue);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,pe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||m(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(m(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){a="function"==typeof o.item;break t}}a=!1}H(a?$(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){u.setTimeout((function(){throw t}),0)}function ye(t,e){pe||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);pe=function(){t.then(_e)}}else pe=function(){var t=_e;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!pt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(fe||(fe=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),fe(t)):u.setImmediate(t)}}(),be||(pe(),be=!0),we.add(t,e)}var be=!1,we=new j;function _e(){for(var t;t=B();){try{t.a.call(t.b)}catch(t){ge(t)}V(q,t)}be=!1}function Ie(t,e){if(this.a=Te,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){Me(n,Ee,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Me(n,Se,t)}))}catch(t){Me(this,Se,t)}}var Te=0,Ee=2,Se=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ke=new F((function(){return new Ae}),(function(t){t.reset()}));function Ne(t,e,n){var r=ke.get();return r.g=t,r.b=e,r.f=n,r}function Oe(t){if(t instanceof Ie)return t;var e=new Ie(f);return Me(e,Ee,t),e}function Re(t){return new Ie((function(e,n){n(t)}))}function De(t,e,n){Ue(t,e,n,null)||ye(T(e,t))}function Ce(t){return new Ie((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)De(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==Te)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Te&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),je(n,i,Se,e)))}t.c=null}else Me(t,Se,e)}function xe(t,e){t.b||t.a!=Ee&&t.a!=Se||Fe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=Ne(null,null,null);return i.a=new Ie((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,xe(t,i),i.a}function Me(t,e,n){t.a==Te&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ue(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Fe(t),e!=Se||n instanceof Ke||function(t,e){t.g=!0,ye((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Ue(t,e,n,r){if(t instanceof Ie)return xe(t,Ne(e||f,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Fe(t){t.h||(t.h=!0,ye(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function je(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){Be.call(null,t)}V(ke,e)}function qe(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return Le(this,v(t)?t:null,v(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(t=Ie.prototype).oa=function(t,e){return(t=Ne(t,t,e)).c=!0,xe(this,t),this},t.o=function(t,e){return Le(this,null,t,e)},t.cancel=function(t){if(this.a==Te){var e=new Ke(t);ye((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=Te,Me(this,Ee,t)},t.ad=function(t){this.a=Te,Me(this,Se,t)},t.gc=function(){for(var t;t=Ve(this);)je(this,t,this.a,this.i);this.h=!1};var Be=ge;function Ke(t){L.call(this,t)}function Ge(){0!=He&&(ze[g(this)]=this),this.xa=this.xa,this.pa=this.pa}S(Ke,L),Ke.prototype.name="cancel";var He=0,ze={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=He)){var e=g(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}Ge.prototype.xa=!1,Ge.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Xe=Object.freeze||function(t){return t},Qe=!Yt||9<=Number(ue),Ye=Yt&&!se("9"),Je=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(t){}return t}();function Ze(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function $e(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if($t){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ze.prototype.preventDefault=function(){this.defaultPrevented=!0},S($e,Ze);var tn=Xe({2:"touch",3:"pen",4:"mouse"});$e.prototype.preventDefault=function(){$e.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},$e.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++nn,this.va=this.Pa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function an(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&Y(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=un(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new rn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function ln(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=In(n),t&&t[en]?En(t,e,n,m(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=wn(t);if(s||(t[cn]=s=new an(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=bn,e=Qe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Je||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=In(n),t&&t[en]?Sn(t,e,n,m(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=In(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(sn(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function mn(t){return t in hn?hn[t]:hn[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&vn(t),n.call(r,e)}function bn(t,e){if(t.va)return!0;if(!Qe){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new $e(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new $e(e,this))}function wn(t){return(t=t[cn])instanceof an?t:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(t){return v(t)?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function Tn(){Ge.call(this),this.v=new an(this),this.ac=this,this.gb=null}function En(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function An(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&sn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function kn(t,e,n){if(v(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Nn(t){var e=null;return new Ie((function(n,r){-1==(e=kn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function On(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Rn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Dn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Dn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Cn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(Tn,Ge),Tn.prototype[en]=!0,Tn.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Ze(t,n);else if(t instanceof Ze)t.target=t.target||n;else{var i=t;yt(t=new Ze(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=An(a,r,!0,t)&&i}if(i=An(a=t.b=n,r,!0,t)&&i,i=An(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=An(a=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=Dn.prototype).W=function(){Cn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Cn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Mn(this,t.c),this.l=t.l,this.a=t.a,Un(this,t.g),this.f=t.f,Fn(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(xn))?(this.i=!!e,Mn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Un(this,n[4]),this.f=Kn(n[5]||"",!0),Fn(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!e,this.b=new Jn(null,this.i))}function Mn(t,e,n){t.c=n?Kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Un(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Fn(t,e,n){e instanceof Jn?(t.b=e,function(t,e){e&&!t.f&&(Zn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Gn(e,Qn)),t.b=new Jn(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function jn(t,e){return t.b.get(e)}function qn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function Bn(t,e,n,r){var i=new Ln(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Un(i,n),r&&(i.f=r),i}function Kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Gn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Xn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Gn(n,Yn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Mn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Un(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Fn(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Wn=/[#\?:]/g,Xn=/[#\?]/g,Qn=/[#\?@]/g,Yn=/#/g;function Jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Zn(t){t.a||(t.a=new Dn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $n(t){var e=Rn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Jn(null,void 0);t=On(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Zn(t),e=ir(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Cn(t)))}function er(t,e){return Zn(t),e=ir(t,e),Pn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),$(n)),t.b+=n.length)}function rr(t){var e=new Jn;return e.c=t.c,t.a&&(e.a=new Dn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return sr(new ar,t,e),e.join("")}function ar(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),sr(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Jn.prototype).add=function(t,e){Zn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Zn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Zn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Zn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=Z(e,this.a.get(ir(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=Z(e,t[n])}return e},t.set=function(t,e){return Zn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function lr(){var t=Dr();return Yt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function fr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||u.window;var n="about:blank";t&&(n=Pt(Ut(t)||jt)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Dr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function mr(t){t=t||u.window;try{t.close()}catch(t){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Dr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Nr(Dr())==Ar&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Ut(void 0!==n.href?n.href:String(n))||jt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=me(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Ft(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Kt("",r,n,a),t=Pt(e),a&&(Zt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new qt(t=(r=St())?r.createHTML(t):t,null,Bt),r=a.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(U("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Kt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var t=null;return new Ie((function(e){"complete"==u.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function _r(t){return t=t||Dr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Tr(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function Er(){return r.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.Z.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function Sr(){var t=Er();return"ReactNative"===t||"Node"===t}var Ar="Firefox",kr="Chrome";function Nr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Ar:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":kr:"Safari"}var Or={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Rr(t,e){e=e||[];var n,r=[],i={};for(n in Or)i[Or[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Nr(i=Dr()):"Worker"===r&&(r=Nr(i=Dr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Dr(){return u.navigator&&u.navigator.userAgent||""}function Cr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=u.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!u.indexedDB}catch(t){return Tr()&&!!u.indexedDB}return!1}function xr(){return(Lr()||"chrome-extension:"===Mr()||_r())&&!Sr()&&Pr()&&!Tr()}function Lr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return u.location&&u.location.protocol||null}function Ur(t){return!vr(t=t||Dr())&&Nr(t)!=Ar}function Fr(t){return void 0===t?null:or(t)}function Vr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function jr(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=Nr(t=t||Dr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Dr(),e=Er(),this.b=vr(t)||"ReactNative"===e}function Hr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Wr(){return!(!Cr("fireauth.oauthhelper",u)&&!Cr("fireauth.iframe",u))}Gr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Xr,Qr={};function Yr(t){Qr[t]||(Qr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Xr=2==Jr.abcd}catch(Xt){Xr=!1}function Zr(t,e,n){Xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function $r(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Zr(t,n,e[n])}function ti(t){var e={};return $r(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Zr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[ai]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Zr(this,"uid",t[ai]),Zr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Zr(this,"enrollmentTime",n),Zr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(t){ni.call(this,t),Zr(this,"phoneNumber",t[si])}function ci(t){var e={},n=t[pi],r=t[vi],i=t[mi];if(t=ri(t[di]),!i||i!=li&&i!=fi&&!n||i==fi&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[yi]=n||null,e[wi]=n||null,e[gi]=r):(e[yi]=r||null,e[wi]=r||null,e[gi]=n||null),e[bi]=t||null,Zr(this,Ii,i),Zr(this,_i,ei(e))}S(ui,ni),ui.prototype.w=function(){var t=ui.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",pi="email",di="mfaInfo",vi="newEmail",mi="requestType",gi="email",yi="fromEmail",bi="multiFactorInfo",wi="previousEmail",_i="data",Ii="operation";function Ti(t){var e=jn(t=qn(t),Ei)||null,n=jn(t,Si)||null,r=jn(t,Ni)||null;if(r=r&&Ri[r]||null,!e||!n||!r)throw new k("argument-error",Ei+", "+Si+"and "+Ni+" are required in a valid action code URL.");$r(this,{apiKey:e,operation:r,code:n,continueUrl:jn(t,Ai)||null,languageCode:jn(t,ki)||null,tenantId:jn(t,Oi)||null})}var Ei="apiKey",Si="oobCode",Ai="continueUrl",ki="languageCode",Ni="mode",Oi="tenantId",Ri={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:li,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Di(t){try{return new Ti(t)}catch(t){return null}}function Ci(t){var e=t[Ui];if(void 0===e)throw new k("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[ji];var r=n[Fi];if(n=n[Vi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",Fi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",Vi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new k("argument-error",ji+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[qi])&&e.length)this.f=e;else if(void 0!==e)throw new k("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new k("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new k("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[xi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new k("argument-error",xi+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",xi="dynamicLinkDomain",Li="handleCodeInApp",Mi="iOS",Ui="url",Fi="installApp",Vi="minimumVersion",ji="packageName",qi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ki=null;function Gi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Gi(t)}catch(t){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ki[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ki){Ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ki[o]&&(Ki[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Gi.prototype.T=function(){return this.f},Gi.prototype.l=function(){return this.c},Gi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Xi=["client_id","response_type","scope","redirect_uri","state"],Qi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Xi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Xi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Xi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Wi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Yi(t){for(var e in Qi)if(Qi[e].fa==t)return Qi[e];return null}function Ji(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[$i];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[Zi])return new to(t)}catch(t){}return null}var Zi="idToken",$i="providerId";function to(t){var e=t[$i];if(!e&&t[Zi]){var n=Hi(t[Zi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Zr(this,"providerId",e),Zr(this,"isNewUser",n)}function eo(t){to.call(this,t),Zr(this,"profile",ei((t=jr(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",t.screenName||null)}function ao(t){var e=qn(t),n=jn(e,"link"),r=jn(qn(n),"link");return e=jn(e,"deep_link_id"),jn(qn(e),"link")||e||r||n||t}function so(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}S(eo,to),S(no,eo),S(ro,eo),S(io,eo),S(oo,eo);var uo="enroll",co="signin";function ho(){}function lo(t,e){return t.then((function(t){if(t[$a]){var n=Hi(t[$a]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==R+"user-not-found"?new k("user-mismatch"):t}))}function fo(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,Zr(this,"providerId",t),Zr(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new fo(t.providerId,t.pendingToken)}catch(t){}return null}function mo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Zr(this,"idToken",e.idToken),e.accessToken&&Zr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Zr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Zr(this,"accessToken",e.oauthToken),Zr(this,"secret",e.oauthTokenSecret)}Zr(this,"providerId",t),Zr(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:$n(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new mo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Qc=e||[],$r(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Yi(t)||{}).Ja||null,this.ob=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function _o(t){bo.call(this,t,Xi),this.a=[]}function Io(){_o.call(this,"facebook.com")}function To(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Eo(){_o.call(this,"github.com")}function So(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function Ao(){_o.call(this,"google.com"),this.Ca("profile")}function ko(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new Ao).credential({idToken:n,accessToken:e})}function No(){bo.call(this,"twitter.com",Wi)}function Oo(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mo("twitter.com",n,"twitter.com")}function Ro(t,e,n){this.a=t,this.f=e,Zr(this,"providerId","password"),Zr(this,"signInMethod",n===Co.EMAIL_LINK_SIGN_IN_METHOD?Co.EMAIL_LINK_SIGN_IN_METHOD:Co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Do(t){return t&&t.email&&t.password?new Ro(t.email,t.password,t.signInMethod):null}function Co(){$r(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(!(e=xo(e)))throw new k("argument-error","Invalid email link!");return new Ro(t,e.code,Co.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Di(t=ao(t)))&&t.operation===li?t:null}function Lo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new k("internal-error");this.a=t,Zr(this,"providerId","phone"),this.fa="phone",Zr(this,"signInMethod","phone")}function Mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Lo(e)}return null}function Uo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Fo(t){try{this.a=t||r.Z.auth()}catch(t){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}$r(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new Lo({eb:t,cb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Lo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return ko(o,n);case"facebook.com":return To(n);case"github.com":return So(n);case"twitter.com":return Oo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new fo(e,a):new mo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Bo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Ko(t){return(t=t||{}).type?new Bo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Go(){this.b=null,this.a=[]}so.prototype.Ha=function(){return this.a?Oe(this.a):Oe(this.b)},so.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ka=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},fo.prototype.ka=function(t){return ws(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,_s(t,n)},fo.prototype.c=function(t,e){return lo(Is(t,po(this)),e)},fo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mo.prototype.ka=function(t){return ws(t,go(this))},mo.prototype.b=function(t,e){var n=go(this);return n.idToken=e,_s(t,n)},mo.prototype.c=function(t,e){return lo(Is(t,go(this)),e)},mo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Ib=mt(t),this},S(wo,bo),S(_o,bo),_o.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},_o.prototype.Qb=function(){return $(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new mo(this.providerId,n,this.providerId)},S(Io,_o),Zr(Io,"PROVIDER_ID","facebook.com"),Zr(Io,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(Eo,_o),Zr(Eo,"PROVIDER_ID","github.com"),Zr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),S(Ao,_o),Zr(Ao,"PROVIDER_ID","google.com"),Zr(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),S(No,bo),Zr(No,"PROVIDER_ID","twitter.com"),Zr(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ro.prototype.ka=function(t){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Rs,{email:this.a,oobCode:this.f}):ru(t,Zs,{email:this.a,password:this.f})},Ro.prototype.b=function(t,e){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ds,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Gs,{idToken:e,email:this.a,password:this.f})},Ro.prototype.c=function(t,e){return lo(this.ka(t),e)},Ro.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},$r(Co,{PROVIDER_ID:"password"}),$r(Co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),$r(Co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lo.prototype.ka=function(t){return t.fb(Uo(this))},Lo.prototype.b=function(t,e){var n=Uo(this);return n.idToken=e,ru(t,tu,n)},Lo.prototype.c=function(t,e){var n=Uo(this);return n.operation="REAUTH",lo(t=ru(t,eu,n),e)},Lo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Fo.prototype.fb=function(t,e){var n=this.a.a;return Oe(e.verify()).then((function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=m(t)?t.session:null,o=m(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,zs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Ws,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},$r(Fo,{PROVIDER_ID:"phone"}),$r(Fo,{PHONE_SIGN_IN_METHOD:"phone"}),Bo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Bo.prototype.T=function(){return this.h},Bo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,zo=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function Xo(t,e,n){k.call(this,t,n),(t=e||{}).Jb&&Zr(this,"email",t.Jb),t.ea&&Zr(this,"phoneNumber",t.ea),t.credential&&Zr(this,"credential",t.credential),t.Zb&&Zr(this,"tenantId",t.Zb)}function Qo(t){if(t.code){var e=t.code||"";0==e.indexOf(R)&&(e=e.substring(R.length));var n={credential:jo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new Xo(e,n,t.message)}return null}function Yo(){}function Jo(t){return t.c||(t.c=t.b())}function Zo(){}function $o(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ta(){}function ea(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Sb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function na(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ra(t,e,n){this.reset(t,e,n,void 0,void 0)}function ia(t){this.f=t,this.b=this.c=this.a=null}function oa(t,e){this.name=t,this.value=e}S(Wo,k),S(Xo,k),Xo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Xo.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,S(Zo,Yo),Zo.prototype.a=function(){var t=$o(this);return t?new ActiveXObject(t):new XMLHttpRequest},Zo.prototype.b=function(){var t={};return $o(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Zo,S(ta,Yo),ta.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ea;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(t=ea.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,na(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",na(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,na(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ra.prototype.a=null,ra.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},oa.prototype.toString=function(){return this.name};var aa=new oa("SEVERE",1e3),sa=new oa("WARNING",900),ua=new oa("CONFIG",700),ca=new oa("FINE",500);function ha(t){return t.c?t.c:t.a?ha(t.a):(U("Root logger has no level set."),null)}ia.prototype.log=function(t,e,n){if(t.value>=ha(this).value)for(v(e)&&(e=e()),t=new ra(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var la={},fa=null;function pa(t){var e;if(fa||(fa=new ia(""),la[""]=fa,fa.c=ua),!(e=la[t])){e=new ia(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=pa(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,la[t]=e}return e}function da(t,e){t&&t.log(ca,e,void 0)}function va(t){this.f=t}function ma(t){Tn.call(this),this.u=t,this.h=void 0,this.readyState=ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=pa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(va,Yo),va.prototype.a=function(){return new ma(this.f)},va.prototype.b=function(t){return function(){return t}}({}),S(ma,Tn);var ga=0;function ya(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ba(t){t.readyState=4,t.g=null,t.c=null,t.m=null,wa(t)}function wa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function _a(t){Tn.call(this),this.headers=new Dn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ia,this.u=this.S=!1}(t=ma.prototype).open=function(t,e){if(this.readyState!=ga)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,wa(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ba(this)),this.readyState=ga},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,wa(this)),this.a&&(this.readyState=3,wa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ya(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ba(this):wa(this),3==this.readyState&&ya(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ba(this))},t.sc=function(t){this.a&&(this.response=t,ba(this))},t.Ua=function(t){var e=this.i;e&&e.log(sa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ba(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(sa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(sa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(_a,Tn);var Ia="";_a.prototype.b=pa("goog.net.XhrIo");var Ta=/^https?$/i,Ea=["POST","PUT"];function Sa(t){return"content-type"==t.toLowerCase()}function Aa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ka(t),Oa(t)}function ka(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Na(t){if(t.c&&void 0!==s)if(t.C[1]&&4==Da(t)&&2==Ca(t))da(t.b,Pa(t,"Local request error detected and ignored"));else if(t.i&&4==Da(t))kn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Da(t)){da(t.b,Pa(t,"Request complete")),t.c=!1;try{var e,n=Ca(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(xn)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ta.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Da(t)?t.a.statusText:""}catch(e){da(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Ca(t)+"]",ka(t)}}finally{Oa(t)}}}function Oa(t,e){if(t.a){Ra(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(aa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ra(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Da(t){return t.a?t.a.readyState:0}function Ca(t){try{return 2<Da(t)?t.a.status:-1}catch(t){return-1}}function Pa(t,e){return e+" ["+t.R+" "+t.l+" "+Ca(t)+"]"}function xa(t){var e=Ha;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function La(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function Ma(t){if(t.a){if(!t.v)throw new ja(t);t.v=!1}}function Ua(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function Fa(t){return X(t.g,(function(t){return v(t[1])}))}function Va(t){if(t.h&&t.a&&Fa(t)){var e=t.h,n=Ka[e];n&&(u.clearTimeout(n.a),delete Ka[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(x(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fa(t)||(n=!0)}}t.c=e,r&&(s=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof xa?(Ua(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Ba(e),Ka[e.a]=e,t.h=e.a)}function ja(){L.call(this)}function qa(){L.call(this)}function Ba(t){this.a=u.setTimeout(I(this.c,this),0),this.b=t}(t=_a.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",da(this.b,Pa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(da(this.b,Pa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Oa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Oa(this,!0)),_a.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Na(this):this.Jc())},t.Jc=function(){Na(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ia:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(aa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return da(this.b,"Can not get response: "+t.message),null}},xa.prototype.cancel=function(t){if(this.a)this.c instanceof xa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new qa(this),Ma(this),La(this,!1,t))}},xa.prototype.m=function(t,e){this.i=!1,La(this,t,e)},xa.prototype.then=function(t,e,n){var r,i,o=new Ie((function(t,e){r=t,i=e}));return Ua(this,r,(function(t){t instanceof qa?o.cancel():i(t)})),o.then(t,e,n)},xa.prototype.$goog_Thenable=!0,S(ja,L),ja.prototype.message="Deferred has already fired",ja.prototype.name="AlreadyCalledError",S(qa,L),qa.prototype.message="Deferred was canceled",qa.prototype.name="CanceledError",Ba.prototype.c=function(){throw delete Ka[this.a],this.b};var Ka={};function Ga(t){var e={},n=e.document||document,r=kt(t).toString(),i=me(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new xa(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){za(i,!0);var t=new Qa(Xa,"Timeout reached for loading script "+r);Ma(a),La(a,!1,t)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(za(i,e.xd||!1,s),Ma(a),La(a,!0,null))},i.onerror=function(){za(i,!0,s);var t=new Qa(Wa,"Error while loading script "+r);Ma(a),La(a,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=l(e.document):(null===h&&(h=l(u.document)),e=h),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ha(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&za(t,!0,this.Ma)}}function za(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Wa=0,Xa=1;function Qa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Ya(t){this.f=t}function Ja(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ts,this.g=mt(t.secureTokenHeaders||es),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ns,this.a=mt(t.firebaseHeaders||rs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Er(),!(n=u.XMLHttpRequest||n&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new va(self):Sr()?this.f=new Ya(n):this.f=new ta,this.b=null}S(Qa,L),S(Ya,Yo),Ya.prototype.a=function(){return new this.f},Ya.prototype.b=function(){return{}};var Za,$a="idToken",ts=new Gr(3e4,6e4),es={"Content-Type":"application/x-www-form-urlencoded"},ns=new Gr(3e4,6e4),rs={"Content-Type":"application/json"};function is(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function os(t,e){e&&(t.l=as("https://securetoken.googleapis.com/v1/token",e),t.h=as("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=as("https://identitytoolkit.googleapis.com/v2/",e))}function as(t,e){return t=qn(t),e=qn(e.url),t.f=t.a+t.f,Mn(t,e.c),t.a=e.a,Un(t,e.g),t.toString()}function ss(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function us(t,e,n,r,i,o,a){(function(){var t=Dr();return!((t=Nr(t)!=kr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ue&&!(9<ue))})()||Tr()?t=I(t.u,t):(Za||(Za=new Ie((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(u[hs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ua(t,null,e,void 0)}(Ga(Nt(cs,{onload:hs})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,a)}Ja.prototype.T=function(){return this.b},Ja.prototype.u=function(t,e,n,r,i,o){if(Tr()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new _a(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}En(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return da(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Sn(a,"ready",(function(){s&&clearTimeout(s),We(this)})),Sn(a,"timeout",(function(){s&&clearTimeout(s),We(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=t.D?Jo(t.D):Jo(Ho),t.a.onreadystatechange=I(t.Vb,t);try{da(t.b,Pa(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return da(t.b,Pa(t,"Error opening Xhr: "+e.message)),void Aa(t,e)}e=r||"";var o=new Dn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)H(t,e,void 0);else for(var n=Rn(t),r=On(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Sa,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Q(Ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ra(t),0<t.g&&(t.u=function(t){return Yt&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),da(t.b,Pa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=kn(t.Ma,t.g,t)),da(t.b,Pa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){da(t.b,Pa(t,"Send error: "+e.message)),Aa(t,e)}}(a,t,n,r,i)};var cs=new wt(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),hs="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new k("invalid-email")}function fs(t){"email"in t&&ls(t)}function ps(t){if(!t[$a]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,mt(t));throw new k("internal-error")}}function ds(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}Ja.prototype.s=function(t,e,n,r,i){var o=this;Za.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ja.prototype.zb=function(){return ru(this,Hs,{})},Ja.prototype.Bb=function(t,e){return ru(this,Ks,{idToken:t,email:e})},Ja.prototype.Cb=function(t,e){return ru(this,Gs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ms(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function gs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new Jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Qo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Qo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Qo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ps(t)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Xs,e)}function _s(t,e){return e.returnIdpCredential=!0,ru(t,Ys,e)}function Is(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Qs,e)}function Ts(t){if(!t.oobCode)throw new k("invalid-action-code")}(t=Ja.prototype).Db=function(t,e){var n={idToken:t},r=[];return dt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ks,n)},t.vb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Fs,t)},t.wb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.ub=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ms,t)},t.Eb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Us,t)},t.fb=function(t){return ru(this,$s,t)},t.nb=function(t,e){return ru(this,qs,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Ss,{oobCode:t})},t.jb=function(t){return ru(this,Es,{oobCode:t})};var Es={endpoint:"setAccountInfo",A:Ts,Z:"email",B:!0},Ss={endpoint:"resetPassword",A:Ts,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},As={endpoint:"signupNewUser",A:function(t){if(ls(t),!t.password)throw new k("weak-password")},G:ps,V:!0,B:!0},ks={endpoint:"createAuthUri",B:!0},Ns={endpoint:"deleteAccount",N:["idToken"]},Os={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},Rs={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ls,G:ps,V:!0,B:!0},Ds={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ls,G:ps,V:!0},Cs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ms,G:ps,B:!0,Na:!0},Ps={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ms,G:ps,B:!0,Na:!0},xs={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");ls(t)},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");ls(t)},Z:"email",B:!0},Vs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},js={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},qs={endpoint:"resetPassword",A:Ts,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",N:["idToken"],A:fs,V:!0},Gs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fs(t),!t.password)throw new k("weak-password")},G:ps,V:!0},Hs={endpoint:"signupNewUser",G:ps,V:!0,B:!0},zs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Ws={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Xs={endpoint:"verifyAssertion",A:gs,Ya:ys,G:bs,V:!0,B:!0},Qs={endpoint:"verifyAssertion",A:gs,Ya:ys,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ps(t)},V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:function(t){if(gs(t),!t.idToken)throw new k("internal-error")},Ya:ys,G:bs,V:!0},Js={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:ps,V:!0,B:!0},Zs={endpoint:"verifyPassword",A:function(t){if(ls(t),!t.password)throw new k("wrong-password")},G:ps,V:!0,B:!0},$s={endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");ds(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Qo(t);ps(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[$a]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Re(new k("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Oe(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=qn(e+n);Vn(s,"key",t.c),a&&Vn(s,"cb",E().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new Ie((function(e,n){us(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:or(Vr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=Fr(t)),new k("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(hu||(hu=new Ie((function(t,e){function n(){Kr(),Cr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Kr(),e(Error("Network Error"))},timeout:uu.get()})}if(Cr("gapi.iframes.Iframe"))t();else if(Cr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Cr("gapi.load")?n():e(Error("Network Error"))},Oe(Ga(r=Nt(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Ie((function(e,n){Cr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new wt(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Gr(3e4,6e4),cu=new Gr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Bn((t=qn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return r.Z.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=fr();return function(t){return ru(t,Vs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=qn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:yr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Wo(fr())}))}function mu(t){return t.m||(t.m=wr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=$(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ko(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Oe(n)}return n.status="ERROR",Oe(n)}))}(t)}))),t.m}function gu(t){return t.l||(t.C=t.c?Rr(t.c,pu(t.b)):null,t.l=new Ja(t.g,P(t.i),t.C),t.f&&os(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=mt(u||null),t.f=c,t.yb(h).toString()}function bu(t){if(this.a=t||r.Z.INTERNAL.reactNative&&r.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=I(this.c,this)}lu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=qn(this.v.url);t=Bn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.Z.app(this.c).auth().la()}catch(t){n=null}for(var i in e.ob=n,Vn(t,"providerId",this.a.providerId),e=Vr((n=this.a).Ib))e[i]=e[i].toString();i=n.Qc,e=mt(e);for(var o=0;o<i.length;o++){var a=i[o];a in e&&delete e[a]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),vt(e)||Vn(t,"customParameters",Fr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Vn(t,"scopes",n.join(",")),this.l?Vn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Vn(t,"v",this.i):tr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!jn(t,s)&&Vn(t,s,this.b[s]);return this.h?Vn(t,"tid",this.h):tr(t.b,"tid"),this.f?Vn(t,"eid",this.f):tr(t.b,"eid"),(s=pu(this.c)).length&&Vn(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Ob=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return mu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ie((function(n){t.a.send(e.type,e,n,Cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&mr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ie((function(e){return function n(){Nn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Nn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=Dr();return!Ur(t)&&!Br(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return Re(new k("popup-blocked"));if(a&&!Ur())return this.ma().o((function(e){mr(t),i(e)})),r(),Oe();this.a||(this.a=vu(gu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw mr(t),i(e),e}));return r(),e})).then((function(){qo(n),a||pr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(gu(this)));var i=this;return this.a.then((function(){qo(e),pr(yu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return mu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new k("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){J(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Oe(this.a.getItem(t)).then((function(t){return t&&jr(t)}))},t.set=function(t,e){return Oe(this.a.setItem(t,Fr(e)))},t.U=function(t){return Oe(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var _u,Iu=[];function Tu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Re(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ie((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),J(t.a,(function(t){return t==e}))}}function Nu(){if(!Cu())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Tr()&&self?(this.v=function(){var t=Tr()?self:null;if(H(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Uu(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Tu(this.v,"ping",(function(){return Oe(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Oe().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Oe(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Eu(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Ou(t){return new Ie((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ie((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Ou(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Ru(t){return t.i||(t.i=Ou(t)),t.i}function Du(t,e){var n=0;return new Ie((function r(i,o){Ru(t).then(e).then(i).o((function(e){if(!(3<++n))return Ru(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Cu(){try{return!!u.indexedDB}catch(t){return!1}}function Pu(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Ie((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Oe()}function Uu(t){return Ru(t).then((function(t){var e=Pu(xu(t,!1));return e.getAll?Lu(e.getAll()):new Ie((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function Fu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Vu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Oe().then((function(){if(Cu()){var t=qr(),r="__sak"+t;return _u||(_u=new Nu),(n=_u).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){H(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==Er();if(!(t=Bu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Bu()||r.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=u.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Er();if(!(t=Hu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Hu()||r.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=u.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Qu,t.Node=Yu,t.ReactNative=Ju,t.Worker=Zu,this.a=t[Er()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,(function(e){i.push(Oe().then((function(){return e(t.origin,t.data.data)})))})),Ce(i).then((function(r){var i=[];H(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return Du(this,(function(e){return Lu((e=Pu(xu(e,!0))).get(t))})).then((function(i){return Du(n,(function(o){if(o=Pu(xu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Du(this,(function(e){return Lu(Pu(xu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Du(this,(function(r){return n=!0,e.b++,Lu(Pu(xu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Fu(t),function e(){t.f=setTimeout((function(){t.l=Uu(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t})),0==this.a.length&&Fu(this)},(t=Vu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return Oe(this.a[t])},t.set=function(t,e){return this.a[t]=e,Oe()},t.U=function(t){return delete this.a[t],Oe()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Oe().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Oe().then((function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Oe().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&ln(u.window,"storage",t)},t.ia=function(t){u.window&&dn(u.window,"storage",t)},(t=Ku.prototype).get=function(){return Oe(null)},t.set=function(){return Oe()},t.U=function(){return Oe()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return Oe().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Oe().then((function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Oe().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,Xu,Qu={F:qu,bb:Gu},Yu={F:qu,bb:Gu},Ju={F:bu,bb:Ku},Zu={F:qu,bb:Ku},$u={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Br(Dr())||!Ir()),e=Ur(),n=Pr();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!lr()&&Wr()||!u.indexedDB?new t.a.F:new Vu(Tr()?new ju:new t.a.F)}catch(t){this.g=new ju,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new ju}this.v=new ju,this.f=I(this.Yb,this),this.b={}}function ec(){return Xu||(Xu=new tc),Xu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.h||(lr()||!Wr())&&u.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new $e({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(J(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.mb(e))},Yt&&ue&&10==ue&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,I(this.mb,this))},t.mb=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=u.Int32Array?new Int32Array(yc):yc),this.reset()}S(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=Z(128,pc);function mc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function gc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(mc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(mc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):$(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}S(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _c(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new k("invalid-cordova-configuration",t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ec(t){return t.f||(t.f=t.ma().then((function(){return new Ie((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Sc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ao(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=jr(jn(o=qn(i),"firebaseError")||null))?N(o):null)?new Bo(r.c,r.b,null,null,o,null,r.T()):new Bo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Tc(t,i)}))}var n=new Bo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Nn(500).then((function(){return Sc(t).then((function(){r||Tc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Cr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},zo||(zo=new Go),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Cr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Sc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Ko(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Ac(t){this.a=t,this.b=ec()}(t=_c.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(_r(void 0)?wr().then((function(){return new Ie((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Re(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Cr("universalLinks.subscribe",u))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Cr("BuildInfo.packageName",u))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Cr("cordova.plugins.browsertab.openUrl",u))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Cr("cordova.InAppBrowser.open",u))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},t.Ob=function(t,e){return e(new k("operation-not-supported-in-this-environment")),Oe()},t.Mb=function(){return Re(new k("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Re(new k("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,h=null;return this.c=Oe().then((function(){return qo(e),Ec(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Bo(e,r,null,o,new k("no-auth-event"),null,i),s=Cr("BuildInfo.packageName",u);if("string"!=typeof s)throw new k("invalid-cordova-configuration");var c=Cr("BuildInfo.displayName",u),h={};if(Dr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=s;else{if(!Dr().toLowerCase().match(/android/))return Re(new k("operation-not-supported-in-this-environment"));h.apn=s}c&&(h.appDisplayName=c),o=function(t){var e=new bc;gc(e,t),t=[];var n=8*e.g;56>e.c?gc(e,vc,56-e.c):gc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(mc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Cr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Cr("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Cr("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");e=Dr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ie((function(t,e){s=function(){var e=Cr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=Nn(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},h=function(){Hr()&&c()},o.addEventListener("resume",c,!1),Dr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Sc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null}))},t.Ea=function(t){this.b.push(t),Ec(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bo("unknown",null,null,null,new k("no-auth-event")),t(e))}))},t.Sa=function(t){J(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",F:"session"};function Nc(t){return ic(t.b,kc,t.a)}function Oc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Gc,this.C=new Qc,this.g=new Ac(Bc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Rc(this.D,this.v,this.m,O,this.J)}function Rc(t,e,n,i,o){var a=r.Z.SDK_VERSION||null;return _r()?new _c(t,e,n,a,i,o):new du(t,e,n,a,i,o)}function Dc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Cc(t){t.a.Xb()&&Dc(t).o((function(e){var n=new Bo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(e)&&t.s(n)})),t.a.Tb()||Hc(t.b)}function Pc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Nc(t.g).then((function(){Dc(t).o((function(e){var n=new Bo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(e)&&t.s(n)}))})):Cc(t)})).o((function(){Cc(t)}))}function xc(t,e){J(t.h,(function(t){return t==e}))}Oc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Rc(this.D,this.v,this.m,null,this.J),this.i={}},Oc.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=E()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=E())),e=!0;break}}return Hc(this.b),e};var Lc=new Gr(2e3,1e4),Mc=new Gr(3e4,6e4);function Uc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Fc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Fc(e))throw new k("operation-not-supported-in-this-environment");return o=e,Nc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ie((function(){})):Nc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function jc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Lc.get())}Oc.prototype.qa=function(){return this.b.qa()};var qc={};function Bc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Kc(t,e,n,r){var i=Bc(e,n,r);return qc[i]||(qc[i]=new Oc(t,e,n,r)),qc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Hc(t){t.g||(t.g=!0,Xc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Xc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return Oe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Xc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Re(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Qc(){}function Yc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Jc(t,e){this.a=e,Zr(this,"verificationId",t)}function Zc(t,e,n,r){return new Fo(t).fb(e,n).then((function(t){return new Jc(t,r)}))}function $c(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");$r(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function th(t,e,n){var r=e&&e[nh];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new so(null,r),this.b=[];var i=this;H(e[eh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Zr(this,"auth",this.a),Zr(this,"session",this.c),Zr(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Xc(this,!0,null,t.a),Oe()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Xc(t,s,e,null)})).o((function(e){Xc(t,s,null,e)}))}(this,t,e):Re(new k("invalid-auth-event")):(Xc(this,!1,null,null),Oe())}else Re(new k("invalid-auth-event"))},Gc.prototype.qa=function(){var t=this;return new Ie((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=Nn(Mc.get()).then((function(){t.b||(t.g=!0,Xc(t,!0,null,e))}))}(t))}))},Qc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Oe()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Re(new k("invalid-auth-event"))}else Re(new k("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var eh="mfaInfo",nh="mfaPendingCredential";function rh(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new th(t,e,n),Zr(this,"resolver",this.b)}function ih(t,e,n){if(t&&m(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rh(e,t.serverResponse,n,t.message)}catch(t){}return null}function oh(){}function ah(t){Zr(this,"factorId",t.fa),this.a=t}function sh(t){if(ah.call(this,t),this.a.fa!=Fo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uh(t,e){for(var n in Ze.call(this,t),e)this[n]=e[n]}function ch(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hh(this,n)}function hh(t,e){t.b=e,Zr(t,"enrolledFactors",e)}function lh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fh(t,e){t.stop(),t.b=Nn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return Hr()||!t?Oe():new Ie((function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){fh(t,!0)})).o((function(e){t.i(e)&&fh(t,!1)}))}function ph(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function dh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vh(t,e){t.b=Hi(e[$a]||""),t.a=e.refreshToken,dh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){this.a=t||null,this.b=e||null,$r(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function gh(t,e,n,r,i,o){$r(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function yh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.Z.SDK_VERSION?Rr(r.Z.SDK_VERSION):null;this.a=new Ja(this.l,P(O),i),t.emulatorConfig&&os(this.a,t.emulatorConfig),this.b=new ph(this.a),Ah(this,e[$a]),vh(this.b,e),Zr(this,"refreshToken",this.b.a),Oh(this,n||{}),Tn.call(this),this.R=!1,this.s&&xr()&&(this.i=Kc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new lh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=I(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){os(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){_h(o,t.f)},this.ba=null,this.O=new ch(this,n),Zr(this,"multiFactor",this.O)}function bh(t,e){t.ja&&dn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&ln(e,"languageCodeChanged",t.Oa)}function wh(t,e){t.X&&dn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&ln(e,"emulatorConfigChanged",t.Aa)}function _h(t,e){t.$=e,ss(t.a,r.Z.SDK_VERSION?Rr(r.Z.SDK_VERSION,t.$):null)}function Ih(t,e){t.ba&&dn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&ln(e,"frameworkChanged",t.Ba)}function Th(t){try{return r.Z.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Eh(t){t.D||t.u.b||(t.u.start(),dn(t,"tokenChanged",t.aa),ln(t,"tokenChanged",t.aa))}function Sh(t){dn(t,"tokenChanged",t.aa),t.u.stop()}function Ah(t,e){t.za=e,Zr(t,"_lat",e)}function kh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ce(e).then((function(){return t}))}function Nh(t){t.i&&!t.R&&(t.R=!0,Pc(t.i,t))}function Oh(t,e){$r(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Rh(){}function Dh(t){return Oe().then((function(){if(t.D)throw new k("app-deleted")}))}function Ch(t){return W(t.providerData,(function(t){return t.providerId}))}function Ph(t,e){e&&(xh(t,e.providerId),t.providerData.push(e))}function xh(t,e){J(t.providerData,(function(t){return t.providerId==e}))}function Lh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Zr(t,e,n)}function Mh(t,e){t!=e&&($r(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Zr(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):Zr(t,"metadata",new mh),H(e.providerData,(function(e){Ph(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Zr(t,"refreshToken",t.b.a),hh(t.O,e.O.b))}function Uh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,xs,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||Lh(t,"isAnonymous",!1),e}))}))}function Fh(t,e){e[$a]&&t.za!=e[$a]&&(vh(t.b,e),t.dispatchEvent(new uh("tokenChanged")),Ah(t,e[$a]),Lh(t,"refreshToken",t.b.a))}function Vh(t,e){return Uh(t).then((function(){if(Q(Ch(t),e))return kh(t).then((function(){throw new k("provider-already-linked")}))}))}function jh(t,e,n){return ti({user:t,credential:jo(e),additionalUserInfo:e=Ji(e),operationType:n})}function qh(t,e){return Fh(t,e),t.reload().then((function(){return t}))}function Bh(t,e,n,i,o){if(!xr())return Re(new k("operation-not-supported-in-this-environment"));if(t.h&&!o)return Re(t.h);var a=Yi(n.providerId),s=qr(t.uid+":::"),u=null;(!Ur()||Ir())&&t.s&&n.isOAuthProvider&&(u=yu(t.s,t.l,t.m,e,n,null,s,r.Z.SDK_VERSION||null,null,null,t.tenantId));var c=gr(u,a&&a.ua,a&&a.ta);return i=i().then((function(){if(Gh(t),!o)return t.I().then((function(){}))})).then((function(){return Uc(t.i,c,e,n,s,!!u,t.tenantId)})).then((function(){return new Ie((function(n,r){t.na(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=jc(t.i,t,e,c,s)}))})).then((function(t){return c&&mr(c),t?ti(t):null})).o((function(t){throw c&&mr(c),t})),Hh(t,i,o)}function Kh(t,e,n,r,i){if(!xr())return Re(new k("operation-not-supported-in-this-environment"));if(t.h&&!i)return Re(t.h);var o=null,a=qr(t.uid+":::");return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,kh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return Vc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Qh(t.ha);throw o})).then((function(){if(o)throw o})),Hh(t,r,i)}function Gh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new k("internal-error");throw new k("auth-domain-config-required")}}function Hh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Re(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new uh("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){Y(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),Th(t),I(t.jc,t))),n||e}))}function zh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[$a]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new yh(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&Ph(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wh(t){this.a=t,this.b=ec()}th.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[eh],delete n[nh],yt(n,t),e.g(n)}))},S(rh,k),oh.prototype.sb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Uo(t.a)}),ru(e,Cs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Uo(t.a)}),ru(e,Ps,n)}))}(this,t,e)},S(ah,oh),S(sh,ah),S(uh,Ze),(t=ch.prototype).yc=function(t){hh(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new so(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Fh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return hh(e,r),Fh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},lh.prototype.start=function(){this.a=this.c,fh(this,!0)},lh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ph.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ph.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Re(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ie((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?us(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",$n(e).toString(),t.g,t.m.get()):r(new k("internal-error"))}))}(t.f,e).then((function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,dh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Oe(null):Oe({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(yh,Tn),yh.prototype.wa=function(t){this.ya=t,is(this.a,t)},yh.prototype.la=function(){return this.ya},yh.prototype.Ga=function(){return $(this.$)},yh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Zr(yh.prototype,"providerId","firebase"),(t=yh.prototype).reload=function(){var t=this;return Hh(this,Dh(this).then((function(){return Uh(t).then((function(){return kh(t)})).then(Rh)})))},t.oc=function(t){return this.I(t).then((function(t){return new $c(t)}))},t.I=function(t){var e=this;return Hh(this,Dh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.za&&(Ah(e,t.accessToken),e.dispatchEvent(new uh("tokenChanged"))),Lh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new gh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ph(this,e[n]);Lh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uh("userReloaded",{hd:t}))},t.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Hh(this,t.c(this.a,this.uid).then((function(t){return Fh(e,t),n=jh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Hh(this,Vh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=jh(e,t,"link"),qh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Hh(this,Vh(this,"phone").then((function(){return Zc(Th(n),t,e,I(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Hh(this,Oe().then((function(){return Zc(Th(n),t,e,I(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Hh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Fh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Hh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Fh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Hh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Fh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Dh(this);var e=this;return Hh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Fh(e,t),Lh(e,"displayName",t.displayName||null),Lh(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Zr(t,"displayName",e.displayName),Zr(t,"photoURL",e.photoURL))})),kh(e)})).then(Rh))},t.cd=function(t){var e=this;return Hh(this,Uh(this).then((function(n){return Q(Ch(e),t)?function(t,e,n){return ru(t,Os,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(Ch(e),(function(t){n[t]||xh(e,t)})),n[Fo.PROVIDER_ID]||Zr(e,"phoneNumber",null),kh(e)})):kh(e).then((function(){throw new k("no-such-provider")}))})))},t.delete=function(){var t=this;return Hh(this,this.I().then((function(e){return ru(t.a,Ns,{idToken:e})})).then((function(){t.dispatchEvent(new uh("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");bh(t,null),wh(t,null),Ih(t,null),t.J=[],t.D=!0,Sh(t),Zr(t,"refreshToken",null),t.i&&xc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):null},t.Ec=function(t){var e=this;return Bh(this,"linkViaPopup",t,(function(){return Vh(e,t.providerId).then((function(){return kh(e)}))}),!1)},t.Nc=function(t){return Bh(this,"reauthViaPopup",t,(function(){return Oe()}),!0)},t.Fc=function(t){var e=this;return Kh(this,"linkViaRedirect",t,(function(){return Vh(e,t.providerId)}),!1)},t.Oc=function(t){return Kh(this,"reauthViaRedirect",t,(function(){return Oe()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hh(this,this.I().then((function(n){return _s(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=jh(i,t,"link"),qh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hh(this,Oe().then((function(){return lo(Is(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=jh(i,t,"reauthenticate"),Fh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Hh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:Bi(new Ci(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Hh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:Bi(new Ci(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Hh(this,t=lo(Oe(t),n.uid).then((function(t){return e=jh(n,t,"reauthenticate"),Fh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.O.w()),t};var Xh={name:"redirectUser",F:"session"};function Qh(t){return ic(t.b,Xh,t.a)}function Yh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=$h("local"),n=$h("session"),r=$h("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=jr(u.localStorage.getItem(r))}catch(t){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Zh,t.a).then((function(t){return t?$h(t):e}))}))}))})).then((function(e){return t.c=e,Jh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener($h("local"),this.a,I(this.g,this))}function Jh(t,e){var n,r=[];for(n in $u)$u[n]!==e&&r.push(ic(t.b,$h($u[n]),t.a));return r.push(ic(t.b,Zh,t.a)),function(t){return new Ie((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)De(t[s],T(o,s),a);else e(i)}))}(r)}Yh.prototype.g=function(){var t=this,e=$h("local");rl(this,(function(){return Oe().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Jh(t,"local").then((function(){t.c=e}))}))}))};var Zh={name:"persistence",F:"session"};function $h(t){return{name:"authUser",F:t}}function tl(t,e){return rl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function el(t){return rl(t,(function(){return ic(t.b,t.c,t.a)}))}function nl(t,e,n){return rl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zh(t||{})}))}))}function rl(t,e){return t.f=t.f.then(e,e),t.f}function il(t){if(this.l=!1,Zr(this,"settings",new Yc),Zr(this,"app",t),!fl(this).options||!fl(this).options.apiKey)throw new k("invalid-api-key");t=r.Z.SDK_VERSION?Rr(r.Z.SDK_VERSION):null,this.a=new Ja(fl(this).options&&fl(this).options.apiKey,P(O),t),this.R=[],this.s=[],this.O=[],this.hb=r.Z.INTERNAL.createSubscribe(I(this.zc,this)),this.X=void 0,this.bc=r.Z.INTERNAL.createSubscribe(I(this.Ac,this)),hl(this,null),this.i=new Yh(fl(this).options.apiKey+":"+fl(this).name),this.D=new Wh(fl(this).options.apiKey+":"+fl(this).name),this.$=ml(this,function(t){var e=fl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),zh(t||{})}))}(t.D,fl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Qh(t.D)}));return ml(t,e)}(t).then((function(){return nl(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return tl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:el(t.i)}))):null})).then((function(e){hl(t,e||null)}));return ml(t,n)}(this)),this.h=ml(this,function(t){return t.$.then((function(){return cl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener($h("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.ya=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=fl(t).options.authDomain,n=fl(t).options.apiKey;e&&xr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Kc(e,n,fl(t).name,t.P),Pc(t.b,t),pl(t)&&Nh(pl(t)),t.m){Nh(t.m);var r=t.m;r.wa(t.la()),bh(r,t),_h(r=t.m,t.J),Ih(r,t),os((r=t.m).a,t.P),wh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=qn(this.P.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function ol(t){Ze.call(this,"languageCodeChanged"),this.h=t}function al(t){Ze.call(this,"emulatorConfigChanged"),this.c=t}function sl(t){Ze.call(this,"frameworkChanged"),this.f=t}function ul(t){return t.Oa||Re(new k("auth-domain-config-required"))}function cl(t){if(!xr())return Re(new k("operation-not-supported-in-this-environment"));var e=ul(t).then((function(){return t.b.qa()})).then((function(t){return t?ti(t):null}));return ml(t,e)}function hl(t,e){pl(t)&&(function(t,e){J(t.S,(function(t){return t==e}))}(pl(t),t.Ba),dn(pl(t),"tokenChanged",t.ya),dn(pl(t),"userDeleted",t.za),dn(pl(t),"userInvalidated",t.Aa),Sh(pl(t))),e&&(e.S.push(t.Ba),ln(e,"tokenChanged",t.ya),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&Eh(e)),Zr(t,"currentUser",e),e&&(e.wa(t.la()),bh(e,t),_h(e,t.J),Ih(e,t),os(e.a,t.P),wh(e,t))}function ll(t,e){var n=null,r=null;return ml(t,e.then((function(e){return n=jo(e),r=Ji(e),function(t,e){var n={};return n.apiKey=fl(t).options.apiKey,n.authDomain=fl(t).options.authDomain,n.appName=fl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new yh(t,e);return n&&(i.ha=n),r&&_h(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return pl(t)&&e.uid==pl(t).uid?(Mh(pl(t),e),t.da(e)):(hl(t,e),Nh(e),t.da(e))})).then((function(){vl(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,I(t.kc,t))),n||e})).then((function(){return ti({user:pl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function fl(t){return t.app}function pl(t){return t.currentUser}function dl(t){return pl(t)&&pl(t)._lat||null}function vl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](dl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](dl(t))}}function ml(t,e){return t.R.push(e),e.oa((function(){Y(t.R,e)})),e}function gl(){}function yl(){this.a={},this.b=1e12}Yh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in $u)if($u[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Cu()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),rl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Jh(n,t)})).then((function(){if(n.c=$h(t),e)return n.b.set(n.c,e,n.a)})):Oe()}))},S(il,Tn),S(ol,Ze),S(al,Ze),S(sl,Ze),(t=il.prototype).xb=function(t){return ml(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,is(this.a,this.aa),this.dispatchEvent(new ol(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&wr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,os(this.a,this.P),this.dispatchEvent(new al(this.P))}},t.Gc=function(t){this.J.push(t),ss(this.a,r.Z.SDK_VERSION?Rr(r.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new sl(this.J))},t.Ga=function(){return $(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:fl(this).options.apiKey,authDomain:fl(this).options.authDomain,appName:fl(this).name,currentUser:pl(this)&&pl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ll(i,ws(i.a,o))}))},t.Xc=function(t){if(!xr())return Re(new k("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),i=qr(),o=null;(!Ur()||Ir())&&fl(this).options.authDomain&&t.isOAuthProvider&&(o=yu(fl(this).options.authDomain,fl(this).options.apiKey,fl(this).name,"signInViaPopup",t,null,i,r.Z.SDK_VERSION||null,null,null,this.T(),this.P));var a=gr(o,n&&n.ua,n&&n.ta);return ml(this,n=ul(this).then((function(n){return Uc(n,a,"signInViaPopup",t,i,!!o,e.T())})).then((function(){return new Ie((function(t,n){e.na("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=jc(e.b,e,"signInViaPopup",a,i)}))})).then((function(t){return a&&mr(a),t?ti(t):null})).o((function(t){throw a&&mr(a),t})))},t.Yc=function(t){if(!xr())return Re(new k("operation-not-supported-in-this-environment"));var e=this;return ml(this,ul(this).then((function(){return function(t){return rl(t,(function(){return t.b.set(Zh,t.c.F,t.a)}))}(e.i)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return cl(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.dd=function(t){if(!t)return Re(new k("null-user"));if(this.S!=t.tenantId)return Re(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=fl(this).options.apiKey,n.authDomain=fl(this).options.authDomain,n.appName=fl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[$a]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new yh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&_h(e,r),Mh(e,t),e}(t,n,e.D,e.Ga());return ml(this,this.h.then((function(){if(fl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return pl(e)&&t.uid==pl(e).uid?(Mh(pl(e),t),e.da(t)):(hl(e,r),Nh(r),e.da(r))})).then((function(){vl(e)})))},t.Ab=function(){var t=this;return ml(this,this.h.then((function(){return t.b&&zc(t.b.b),pl(t)?(hl(t,null),el(t.i).then((function(){vl(t)}))):Oe()})))},t.Zc=function(){var t=this;return nl(this.i,fl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=pl(t)&&e){n=pl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Mh(pl(t),e),pl(t).I();(pl(t)||e)&&(hl(t,e),e&&(Nh(e),e.ha=t.D),t.b&&Pc(t.b,t),vl(t))}}))},t.da=function(t){return tl(this.i,t)},t.mc=function(){vl(this),this.da(pl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return ll(e,Oe(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(pl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),ml(t,t.h.then((function(){!t.l&&Q(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(dl(t)))})))}(this,(function(){t.next(pl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(pl(r)):"function"==typeof t.next&&t.next(pl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(pl(r)):"function"==typeof t.next&&t.next(pl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return ml(this,this.h.then((function(){return pl(e)?pl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return ll(e,ru(e.a,Js,{token:t}))})).then((function(t){var n=t.user;return Lh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return ll(n,ru(n.a,Zs,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return ll(n,ru(n.a,As,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return ll(e,t.ka(e.a))}))},t.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=pl(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ll(t,t.a.zb()).then((function(e){var n=e.user;return Lh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return pl(this)&&pl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&pl(this)&&Eh(pl(this))},t.Pc=function(t){var e=this;H(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&pl(this)&&Sh(pl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ml(this,this.h.then((function(){e.l||Q(e.s,t)&&t(dl(e))})))},t.removeAuthTokenListener=function(t){J(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener($h("local"),t.a,this.ja),this.b&&(xc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return ml(this,function(t,e){return ru(t,ks,{identifier:e,continueUri:Lr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.wb=function(t,e){var n=this;return ml(this,Oe().then((function(){var t=new Ci(e);if(!t.c)throw new k("argument-error",Li+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return ml(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return ml(this,this.a.Ra(t).then((function(t){return new ci(t)})))},t.jb=function(t){return ml(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return ml(this,Oe().then((function(){return void 0===e||vt(e)?{}:Bi(new Ci(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return ml(this,Zc(this,t,e,I(this.$a,this)))},t.Vc=function(t,e){var n=this;return ml(this,Oe().then((function(){var r=e||fr(),i=Po(t,r);if(!(r=xo(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.$a(i)})))},gl.prototype.render=function(){},gl.prototype.reset=function(){},gl.prototype.getResponse=function(){},gl.prototype.execute=function(){};var bl=null;function wl(t,e){return(e=_l(e))&&t.a[e]||null}function _l(t){return(t=void 0===t?1e12:t)?t.toString():null}function Il(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function Tl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function El(){}function Sl(){}yl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Il(t,e),this.b++},yl.prototype.reset=function(t){var e=wl(this,t);t=_l(t),e&&t&&(e.delete(),delete this.a[t])},yl.prototype.getResponse=function(t){return(t=wl(this,t))?t.getResponse():null},yl.prototype.execute=function(t){(t=wl(this,t))&&t.execute()},Il.prototype.getResponse=function(){return Tl(this),this.b},Il.prototype.execute=function(){Tl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Il.prototype.delete=function(){Tl(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Zr(El,"FACTOR_ID","phone"),Sl.prototype.g=function(){return bl||(bl=new yl),Oe(bl)},Sl.prototype.c=function(){};var Al=null;function kl(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nl=new wt(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ol=new Gr(3e4,6e4);kl.prototype.g=function(t){var e=this;return new Ie((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),Ol.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[e.a]},Oe(Ga(Nt(Nl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},kl.prototype.c=function(){this.b--};var Rl=null;function Dl(t,e,n,r,i,o,a){if(Zr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Al||(Al=new Sl),a=Al):(Rl||(Rl=new kl),a=Rl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[xl])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ll],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ja(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Cl];this.a[Cl]=function(t){if(Ml(s,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Cr(c,u);"function"==typeof e&&e(t)}};var h=this.a[Pl];this.a[Pl]=function(){if(Ml(s,null),"function"==typeof h)h();else if("string"==typeof h){var t=Cr(h,u);"function"==typeof t&&t()}}}var Cl="callback",Pl="expired-callback",xl="sitekey",Ll="size";function Ml(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Ul(t,e){return t.h.push(e),e.oa((function(){Y(t.h,e)})),e}function Fl(t){if(t.D)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vl(t,e,n){var i=!1;try{this.b=n||r.Z.app()}catch(t){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=r.Z.SDK_VERSION?Rr(r.Z.SDK_VERSION,a):null,Dl.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),a,P(O),i)}function jl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=ql.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=ql[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(t=Dl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Ul(this,Oe().then((function(){if(Lr()&&!Tr())return wr();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,js,{})})).then((function(e){t.a[xl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Fl(this);var t=this;return Ul(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ht(a.name),'"'),a.type){o.push(' type="',Ht(a.type),'"');var s={};yt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=me(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):le(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Fl(this);var t=this;return Ul(this,this.render().then((function(e){return new Ie((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){J(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Fl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Fl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Vl,Dl);var ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Bl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Kl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Gl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:m}}function Hl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function zl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Wl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Xl(t,e){return m(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Ql(t){return m(t)&&"string"==typeof t.uid}function Yl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Jl(t,e){for(var n in e){var r=e[n].name;t[r]=tf(r,t[n],e[n].j)}}function Zl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){jl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function $l(t,e,n,r){t[e]=tf(e,n,r)}function tf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Jl(il.prototype,{jb:{name:"applyActionCode",j:[Bl("code")]},Ra:{name:"checkActionCode",j:[Bl("code")]},nb:{name:"confirmPasswordReset",j:[Bl("code"),Bl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Bl("email"),Bl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Bl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Bl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yl(Gl(),Hl(),"nextOrObserver"),Hl("opt_error",!0),Hl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yl(Gl(),Hl(),"nextOrObserver"),Hl("opt_error",!0),Hl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Bl("email"),Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Bl("email"),Gl("actionCodeSettings")]},xb:{name:"setPersistence",j:[Bl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Wl()]},Tc:{name:"signInWithCustomToken",j:[Bl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Bl("email"),Bl("password")]},Vc:{name:"signInWithEmailLink",j:[Bl("email"),Bl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Bl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Yl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof yh)}},zl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Bl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Bl("url"),Gl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Bl("code")]}}),Zl(il.prototype,{lc:{name:"languageCode",kb:Yl(Bl(),zl(),"languageCode")},ti:{name:"tenantId",kb:Yl(Bl(),zl(),"tenantId")}}),il.Persistence=$u,il.Persistence.LOCAL="local",il.Persistence.SESSION="session",il.Persistence.NONE="none",Jl(yh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Kl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Kl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wl()]},qb:{name:"linkWithCredential",j:[Wl()]},Dc:{name:"linkWithPhoneNumber",j:[Bl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wl()]},tb:{name:"reauthenticateWithCredential",j:[Wl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Bl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Bl(null,!0)]},cd:{name:"unlink",j:[Bl("provider")]},Bb:{name:"updateEmail",j:[Bl("email")]},Cb:{name:"updatePassword",j:[Bl("password")]},ed:{name:"updatePhoneNumber",j:[Wl("phone")]},Db:{name:"updateProfile",j:[Gl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Bl("email"),Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]}}),Jl(yl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(gl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Zl(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Kl("appVerificationDisabledForTesting")}}),Jl(Jc.prototype,{confirm:{name:"confirm",j:[Bl("verificationCode")]}}),$l(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,Do,Mo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Yl(Bl(),Gl(),"json")]),$l(Co,"credential",(function(t,e){return new Ro(t,e)}),[Bl("email"),Bl("password")]),Jl(Ro.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(Io.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),$l(Io,"credential",To,[Yl(Bl(),Gl(),"token")]),$l(Co,"credentialWithLink",Po,[Bl("email"),Bl("emailLink")]),Jl(Eo.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),$l(Eo,"credential",So,[Yl(Bl(),Gl(),"token")]),Jl(Ao.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),$l(Ao,"credential",ko,[Yl(Bl(),Yl(Gl(),zl()),"idToken"),Yl(Bl(),zl(),"accessToken",!0)]),Jl(No.prototype,{Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),$l(No,"credential",Oo,[Yl(Bl(),Gl(),"token"),Bl("secret",!0)]),Jl(_o.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},credential:{name:"credential",j:[Yl(Bl(),Yl(Gl(),zl()),"optionsOrIdToken"),Yl(Bl(),zl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Jl(mo.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(fo.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),$l(Fo,"credential",Vo,[Bl("verificationId"),Bl("verificationCode")]),Jl(Fo.prototype,{fb:{name:"verifyPhoneNumber",j:[Yl(Bl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Xl(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Xl(t.session,co)&&Ql(t.multiFactorHint):t.session&&t.multiFactorUid?Xl(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Jl(Lo.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(k.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(Xo.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(Wo.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(rh.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(th.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Jl(ch.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Bl("displayName",!0)]},bd:{name:"unenroll",j:[Yl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Ql},Bl(),"multiFactorInfoIdentifier")]}}),Jl(Vl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),$l(Ti,"parseLink",Di,[Bl("link")]),$l(El,"assertion",(function(t){return new sh(t)}),[Wl("phone")]),function(){if(void 0===r.Z||!r.Z.INTERNAL||!r.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:il,AuthCredential:ho,Error:k};$l(t,"EmailAuthProvider",Co,[]),$l(t,"FacebookAuthProvider",Io,[]),$l(t,"GithubAuthProvider",Eo,[]),$l(t,"GoogleAuthProvider",Ao,[]),$l(t,"TwitterAuthProvider",No,[]),$l(t,"OAuthProvider",_o,[Bl("providerId")]),$l(t,"SAMLAuthProvider",wo,[Bl("providerId")]),$l(t,"PhoneAuthProvider",Fo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof il)}}]),$l(t,"RecaptchaVerifier",Vl,[Yl(Bl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.Z.app.App)}}]),$l(t,"ActionCodeURL",Ti,[]),$l(t,"PhoneMultiFactorGenerator",El,[]),r.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new il(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.Z.registerVersion("@firebase/auth","0.16.4"),r.Z.INTERNAL.extendNamespace({User:yh})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},945:(t,e,n)=>{"use strict";var r=n(983),i=n(448),o=n(594),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var u,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},h=h||{},l=c||self;function f(){}function p(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _(){return Date.now()}function I(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++m)}(this)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function A(t){return Array.prototype.concat.apply([],arguments)}function k(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function N(t){return/^[\s\xa0]*$/.test(t)}var O,R=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function D(t,e){return-1!=t.indexOf(e)}function C(t,e){return t<e?-1:t>e?1:0}t:{var P=l.navigator;if(P){var x=P.userAgent;if(x){O=x;break t}}O=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e={};for(var n in t)e[n]=t[n];return e}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<U.length;o++)n=U[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function V(t){return V[" "](t),t}V[" "]=f;var j,q,B=D(O,"Opera"),K=D(O,"Trident")||D(O,"MSIE"),G=D(O,"Edge"),H=G||K,z=D(O,"Gecko")&&!(D(O.toLowerCase(),"webkit")&&!D(O,"Edge"))&&!(D(O,"Trident")||D(O,"MSIE"))&&!D(O,"Edge"),W=D(O.toLowerCase(),"webkit")&&!D(O,"Edge");function X(){var t=l.document;return t?t.documentMode:void 0}t:{var Q="",Y=(q=O,z?/rv:([^\);]+)(\)|;)/.exec(q):G?/Edge\/([\d\.]+)/.exec(q):K?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):W?/WebKit\/(\S+)/.exec(q):B?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(Y&&(Q=Y?Y[1]:""),K){var J=X();if(null!=J&&J>parseFloat(Q)){j=String(J);break t}}j=Q}var Z,$={};function tt(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=R(String(j)).split("."),r=R(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=C(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||C(0==a[2].length,0==s[2].length)||C(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}l.document&&K?Z=X()||parseInt(j,10)||void 0:Z=void 0;var et=Z,nt=!K||9<=Number(et),rt=K&&!tt("9"),it=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",f,e),l.removeEventListener("test",f,e)}catch(t){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(z){t:{try{V(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.defaultPrevented=!0},I(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function ht(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ct,this.Y=this.Z=!1}function lt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ft(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=E(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(lt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=dt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new ht(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),mt={};function gt(t,e,n,r,i){if(r&&r.once)return bt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)gt(t,e[o],n,r,i);return null}return n=kt(n),t&&t[ut]?t.va(e,n,d(r)?!!r.capture:!!r,i):yt(t,e,n,!1,r,i)}function yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i;if(a&&!nt)return null;var s=St(t);if(s||(t[vt]=s=new ft(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Et,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(It(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=kt(n),t&&t[ut]?t.wa(e,n,d(r)?!!r.capture:!!r,i):yt(t,e,n,!0,r,i)}function wt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=kt(n),t&&t[ut]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=dt(o=t.a[e],n,r,i))&&(lt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=St(t))&&(e=t.a[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&_t(n))}function _t(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ut])pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(It(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=St(e))?(pt(n,t),0==n.b&&(n.src=null,e[vt]=null)):lt(t)}}}function It(t){return t in mt?mt[t]:mt[t]="on"+t}function Tt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&_t(t),n.call(r,e)}function Et(t,e){if(t.Y)return!0;if(!nt){if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Tt(t,e=new at(e,this))}return Tt(t,new at(e,this))}function St(t){return(t=t[vt])instanceof ft?t:null}var At="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(t){return"function"==typeof t?t:(t[At]||(t[At]=function(e){return t.handleEvent(e)}),t[At])}function Nt(){T.call(this),this.c=new ft(this),this.J=this,this.C=null}function Ot(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;F(e=new ot(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Rt(a,r,!0,e)&&i}if(i=Rt(a=e.a=t,r,!0,e)&&i,i=Rt(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Rt(a=e.a=n[o],r,!1,e)&&i}function Rt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&pt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}I(Nt,T),Nt.prototype[ut]=!0,(u=Nt.prototype).addEventListener=function(t,e,n,r){gt(this,t,e,n,r)},u.removeEventListener=function(t,e,n,r){wt(this,t,e,n,r)},u.G=function(){if(Nt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)lt(n[r]);delete e.a[t],e.b--}}this.C=null},u.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},u.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Dt=l.JSON.stringify;function Ct(){this.b=this.a=null}var Pt,xt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Mt}),(function(t){t.reset()}));function Lt(){var t=jt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Mt(){this.next=this.b=this.a=null}function Ut(t){l.setTimeout((function(){throw t}),0)}function Ft(t,e){Pt||function(){var t=l.Promise.resolve(void 0);Pt=function(){t.then(qt)}}(),Vt||(Pt(),Vt=!0),jt.add(t,e)}Ct.prototype.add=function(t,e){var n=xt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Mt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Mt.prototype.reset=function(){this.next=this.b=this.a=null};var Vt=!1,jt=new Ct;function qt(){for(var t;t=Lt();){try{t.a.call(t.b)}catch(t){Ut(t)}var e=xt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Vt=!1}function Bt(t,e){Nt.call(this),this.b=t||1,this.a=e||l,this.f=b(this.Za,this),this.g=_()}function Kt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gt(t,e,n){if("function"==typeof t)n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function Ht(t){t.a=Gt((function(){t.a=null,t.c&&(t.c=!1,Ht(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}I(Bt,Nt),(u=Bt.prototype).aa=!1,u.M=null,u.Za=function(){if(this.aa){var t=_()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ot(this,"tick"),this.aa&&(Kt(this),this.start()))}},u.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=_())},u.G=function(){Bt.X.G.call(this),Kt(this),delete this.a};var zt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ht(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(l.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(T);function Wt(t){T.call(this),this.b=t,this.a={}}I(Wt,T);var Xt=[];function Qt(t,e,n,r){Array.isArray(n)||(n&&(Xt[0]=n.toString()),n=Xt);for(var i=0;i<n.length;i++){var o=gt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Yt(t){L(t.a,(function(t,e){this.a.hasOwnProperty(e)&&_t(t)}),t),t.a={}}function Jt(){this.a=!0}function Zt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Dt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Wt.prototype.G=function(){Wt.X.G.call(this),Yt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jt.prototype.info=function(){};var $t={},te=null;function ee(){return te=te||new Nt}function ne(t){ot.call(this,$t.Fa,t)}function re(t){var e=ee();Ot(e,new ne(e,t))}function ie(t,e){ot.call(this,$t.STAT_EVENT,t),this.stat=e}function oe(t){var e=ee();Ot(e,new ie(e,t))}function ae(t){ot.call(this,$t.Ga,t)}function se(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return l.setTimeout((function(){t()}),e)}$t.Fa="serverreachability",I(ne,ot),$t.STAT_EVENT="statevent",I(ie,ot),$t.Ga="timingevent",I(ae,ot);var ue={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ce={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function he(){}function le(t){var e;return(e=t.a)||(e=t.a={}),e}function fe(){}he.prototype.a=null;var pe,de={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ve(){ot.call(this,"d")}function me(){ot.call(this,"c")}function ge(){}function ye(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Wt(this),this.P=be,t=H?125:void 0,this.R=new Bt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}I(ve,ot),I(me,ot),I(ge,he),pe=new ge;var be=45e3,we={},_e={};function Ie(t,e,n){t.H=1,t.i=Ge(Fe(e)),t.j=n,t.I=!0,Te(t,null)}function Te(t,e){t.u=_(),Ae(t),t.l=Fe(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),rn(n.b,"t",r),t.D=0,t.a=Zn(t.g,t.g.C?e:null),0<t.O&&(t.F=new zt(b(t.Ca,t,t.a),t.O)),Qt(t.J,t.a,"readystatechange",t.Xa),e=t.B?M(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),re(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ee(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Se(t,n);if(i==_e){4==e&&(t.h=4,oe(14),r=!1),Zt(t.c,t.f,null,"[Incomplete Response]");break}if(i==we){t.h=4,oe(15),Zt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Zt(t.c,t.f,i,null),De(t,i)}4==e&&0==n.length&&(t.h=1,oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gn(e),e.F=!0,oe(11))):(Zt(t.c,t.f,n,"[Invalid Chunked Response]"),Re(t),Oe(t))}function Se(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?_e:(n=Number(e.substring(n,r)),isNaN(n)?we:(r+=1)+n>e.length?_e:(e=e.substr(r,n),t.D=r+n,e))}function Ae(t){t.T=_()+t.P,ke(t,t.P)}function ke(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=se(b(t.Va,t),e)}function Ne(t){t.o&&(l.clearTimeout(t.o),t.o=null)}function Oe(t){0==t.g.v||t.A||Wn(t.g,t)}function Re(t){Ne(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Kt(t.R),Yt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function De(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ln(n.b,t)))if(n.I=t.N,!t.C&&ln(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;zn(n),Ln(n)}Kn(n),oe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=se(b(n.Sa,n),6e3));if(1>=hn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Qn(n,11)}else if((t.C||n.a==t)&&zn(n),!N(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(D(h,"spdy")||D(h,"quic")||D(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(fn(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ke(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=_()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Jn(u,u.C?u.ga:null,u.fa),p.C){pn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ne(d),Ae(d)),u.a=p}else Bn(u);0<n.g.length&&Fn(n)}else"stop"!=i[0]&&"close"!=i[0]||Qn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Qn(n,7):xn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);re(4)}catch(t){}}function Ce(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)S(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(p(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Pe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Le(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Le(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(u=ye.prototype).setTimeout=function(t){this.P=t},u.Xa=function(t){t=t.target;var e=this.F;e&&3==Rn(t)?e.f():this.Ca(t)},u.Ca=function(t){try{if(t==this.a)t:{var e=Rn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!H&&!this.a.$())){this.A||4!=e||7==n||re(8==n||0>=r?3:2),Ne(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,oe(12),Re(this),Oe(this);break t}Zt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,De(this,u)}this.I?(Ee(this,e,o),H&&this.b&&3==e&&(Qt(this.J,this.R,"tick",this.Wa),this.R.start())):(Zt(this.c,this.f,o,null),De(this,o)),4==e&&Re(this),this.b&&!this.A&&(4==e?Wn(this.g,this):(this.b=!1,Ae(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),Re(this),Oe(this)}}}catch(t){}},u.Wa=function(){if(this.a){var t=Rn(this.a),e=this.a.$();this.D<e.length&&(Ne(this),Ee(this,t,e),this.b&&4!=t&&Ae(this))}},u.cancel=function(){this.A=!0,Re(this)},u.Va=function(){this.o=null;var t=_();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(re(3),oe(17)),Re(this),this.h=2,Oe(this)):ke(this,this.T-t)},(u=Pe.prototype).K=function(){xe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},u.L=function(){return xe(this),this.a.concat()},u.get=function(t,e){return Le(this.b,t)?this.b[t]:e},u.set=function(t,e){Le(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},u.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Me=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ue(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ue){this.a=void 0!==e?e:t.a,Ve(this,t.f),this.j=t.j,je(this,t.c),qe(this,t.h),this.g=t.g,e=t.b;var n=new $e;n.c=e.c,e.a&&(n.a=new Pe(e.a),n.b=e.b),Be(this,n),this.i=t.i}else t&&(n=String(t).match(Me))?(this.a=!!e,Ve(this,n[1]||"",!0),this.j=He(n[2]||""),je(this,n[3]||"",!0),qe(this,n[4]),this.g=He(n[5]||"",!0),Be(this,n[6]||"",!0),this.i=He(n[7]||"")):(this.a=!!e,this.b=new $e(null,this.a))}function Fe(t){return new Ue(t)}function Ve(t,e,n){t.f=n?He(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function je(t,e,n){t.c=n?He(e,!0):e}function qe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Be(t,e,n){e instanceof $e?(t.b=e,function(t,e){e&&!t.f&&(tn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ze(e,Je)),t.b=new $e(e,t.a))}function Ke(t,e,n){t.b.set(e,n)}function Ge(t){return Ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function He(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ze(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,We),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function We(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ue.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ze(e,Xe,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ze(e,Xe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ze(n,"/"==n.charAt(0)?Ye:Qe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ze(n,Ze)),t.join("")};var Xe=/[#\/\?@]/g,Qe=/[#\?:]/g,Ye=/[#\?]/g,Je=/[#\?@]/g,Ze=/#/g;function $e(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tn(t){t.a||(t.a=new Pe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),Le(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Le((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xe(t)))}function nn(t,e){return tn(t),e=on(t,e),Le(t.a.b,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.c=null,t.a.set(on(t,e),k(n)),t.b+=n.length)}function on(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(u=$e.prototype).add=function(t,e){tn(this),this.c=null,t=on(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},u.forEach=function(t,e){tn(this),this.a.forEach((function(n,r){S(n,(function(n){t.call(e,n,r,this)}),this)}),this)},u.L=function(){tn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},u.K=function(t){tn(this);var e=[];if("string"==typeof t)nn(this,t)&&(e=A(e,this.a.get(on(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=A(e,t[n])}return e},u.set=function(t,e){return tn(this),this.c=null,nn(this,t=on(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},u.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},u.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var an=function(t,e){this.b=t,this.a=e};function sn(t){this.g=t||un,t=l.PerformanceNavigationTiming?0<(t=l.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(l.ia&&l.ia.ya&&l.ia.ya()&&l.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var un=10;function cn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function hn(t){return t.b?1:t.a?t.a.size:0}function ln(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fn(t,e){t.a?t.a.add(e):t.b=e}function pn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function dn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=s(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return k(t.c)}function vn(){}function mn(){this.a=new vn}function gn(t,e,n){var r=n||"";try{Ce(t,(function(t,n){var i=t;d(t)&&(i=Dt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function yn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}sn.prototype.cancel=function(){var t,e;if(this.c=dn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=s(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},vn.prototype.stringify=function(t){return l.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return l.JSON.parse(t,void 0)};var bn=l.JSON.parse;function wn(t){Nt.call(this),this.headers=new Pe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}I(wn,Nt);var _n="",In=/^https?$/i,Tn=["POST","PUT"];function En(t){return"content-type"==t.toLowerCase()}function Sn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,An(t),Nn(t)}function An(t){t.u||(t.u=!0,Ot(t,"complete"),Ot(t,"error"))}function kn(t){if(t.b&&void 0!==h&&(!t.s[1]||4!=Rn(t)||2!=t.W()))if(t.l&&4==Rn(t))Gt(t.za,0,t);else if(Ot(t,"readystatechange"),4==Rn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Me)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}i=!In.test(o?o.toLowerCase():"")}e=i}if(e)Ot(t,"complete"),Ot(t,"success");else{t.h=6;try{var s=2<Rn(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",An(t)}}finally{Nn(t)}}}function Nn(t,e){if(t.a){On(t);var n=t.a,r=t.s[0]?f:null;t.a=null,t.s=null,e||Ot(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function On(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(l.clearTimeout(t.m),t.m=null)}function Rn(t){return t.a?t.a.readyState:0}function Dn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ke(t,e,n))}function Cn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Pn(t){this.pa=0,this.g=[],this.c=new Jt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Cn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Cn("baseRetryDelayMs",5e3,t),this.Ra=Cn("retryDelaySeedMs",1e4,t),this.Ma=Cn("forwardChannelMaxRetries",2,t),this.ma=Cn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new sn(t&&t.concurrentRequestLimit),this.ka=new mn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function xn(t){if(Mn(t),3==t.v){var e=t.R++,n=Fe(t.B);Ke(n,"SID",t.J),Ke(n,"RID",e),Ke(n,"TYPE","terminate"),jn(t,n),(e=new ye(t,t.c,e,void 0)).H=2,e.i=Ge(Fe(n)),n=!1,l.navigator&&l.navigator.sendBeacon&&(n=l.navigator.sendBeacon(e.i.toString(),"")),!n&&l.Image&&((new Image).src=e.i,n=!0),n||(e.a=Zn(e.g,null),e.a.ba(e.i)),e.u=_(),Ae(e)}Yn(t)}function Ln(t){t.a&&(Gn(t),t.a.cancel(),t.a=null)}function Mn(t){Ln(t),t.j&&(l.clearTimeout(t.j),t.j=null),zn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&l.clearTimeout(t.h),t.h=null)}function Un(t,e){t.g.push(new an(t.Oa++,e)),3==t.v&&Fn(t)}function Fn(t){cn(t.b)||t.h||(t.h=!0,Ft(t.Ba,t),t.u=0)}function Vn(t,e){var n;n=e?e.f:t.R++;var r=Fe(t.B);Ke(r,"SID",t.J),Ke(r,"RID",n),Ke(r,"AID",t.P),jn(t,r),t.i&&t.l&&Dn(r,t.i,t.l),n=new ye(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=qn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fn(t.b,n),Ie(n,r,e)}function jn(t,e){t.f&&Ce({},(function(t,n){Ke(e,n,t)}))}function qn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?b(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{gn(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Bn(t){t.a||t.j||(t.T=1,Ft(t.Aa,t),t.o=0)}function Kn(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=se(b(t.Aa,t),Xn(t,t.o)),t.o++,0))}function Gn(t){null!=t.s&&(l.clearTimeout(t.s),t.s=null)}function Hn(t){t.a=new ye(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Fe(t.la);Ke(e,"RID","rpc"),Ke(e,"SID",t.J),Ke(e,"CI",t.H?"0":"1"),Ke(e,"AID",t.P),jn(t,e),Ke(e,"TYPE","xmlhttp"),t.i&&t.l&&Dn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ge(Fe(e)),n.j=null,n.I=!0,Te(n,t)}function zn(t){null!=t.m&&(l.clearTimeout(t.m),t.m=null)}function Wn(t,e){var n=null;if(t.a==e){zn(t),Gn(t),t.a=null;var r=2}else{if(!ln(t.b,e))return;n=e.s,pn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=_()-e.u;var i=t.u;Ot(r=ee(),new ae(r,n,e,i)),Fn(t)}else Bn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(hn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=se(b(t.Ba,t,e),Xn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Kn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Qn(t,5);break;case 4:Qn(t,10);break;case 3:Qn(t,6);break;default:Qn(t,2)}}function Xn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Qn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=b(t.Ya,t);n||(n=new Ue("//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||Ve(n,"https"),Ge(n)),function(t,e){var n=new Jt;if(l.Image){var r=new Image;r.onload=w(yn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(yn,n,r,"TestLoadImage: error",!1,e),r.onabort=w(yn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(yn,n,r,"TestLoadImage: timeout",!1,e),l.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.v=0,t.f&&t.f.ra(e),Yn(t),Mn(t)}function Yn(t){t.v=0,t.I=-1,t.f&&(0==dn(t.b).length&&0==t.g.length||(t.b.c.length=0,k(t.g),t.g.length=0),t.f.qa())}function Jn(t,e,n){var r=function(t){return t instanceof Ue?Fe(t):new Ue(t,void 0)}(n);if(""!=r.c)e&&je(r,e+"."+r.c),qe(r,r.h);else{var i=l.location;r=function(t,e,n,r){var i=new Ue(null,void 0);return t&&Ve(i,t),e&&je(i,e),n&&qe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&L(t.V,(function(t,e){Ke(r,e,t)})),e=t.A,n=t.na,e&&n&&Ke(r,e,n),Ke(r,"VER",t.ha),jn(t,r),r}function Zn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t.Na)).F=t.C,e}function $n(){}function tr(){if(K&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function er(t,e){Nt.call(this),this.a=new Pn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!N(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ir(this)}function nr(t){ve.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rr(){me.call(this),this.status=1}function ir(t){this.a=t}(u=wn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?le(this.H):le(pe),this.a.onreadystatechange=b(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Sn(this,t)}t=n||"";var i=new Pe(this.headers);r&&Ce(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=En,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=l.FormData&&t instanceof l.FormData,!(0<=E(Tn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{On(this),0<this.o&&((this.D=function(t){return K&&tt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.xa,this)):this.m=Gt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Sn(this,t)}},u.xa=function(){void 0!==h&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ot(this,"timeout"),this.abort(8))},u.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ot(this,"complete"),Ot(this,"abort"),Nn(this))},u.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Nn(this,!0)),wn.X.G.call(this)},u.za=function(){this.j||(this.A||this.l||this.g?kn(this):this.Ua())},u.Ua=function(){kn(this)},u.W=function(){try{return 2<Rn(this)?this.a.status:-1}catch(t){return-1}},u.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},u.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bn(e)}},u.ua=function(){return this.h},u.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(u=Pn.prototype).ha=8,u.v=1,u.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ye(this,this.c,t,void 0),r=this.l;if(this.O&&(r?F(r=M(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qn(this,n,e),Ke(i=Fe(this.B),"RID",t),Ke(i,"CVER",22),this.A&&Ke(i,"X-HTTP-Session-Id",this.A),jn(this,i),this.i&&r&&Dn(i,this.i,r),fn(this.b,n),this.Ia&&Ke(i,"TYPE","init"),this.da?(Ke(i,"$req",e),Ke(i,"SID","null"),n.U=!0,Ie(n,i,null)):Ie(n,i,e),this.v=2}}else 3==this.v&&(t?Vn(this,t):0==this.g.length||cn(this.b)||Vn(this))},u.Aa=function(){if(this.j=null,Hn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=se(b(this.Ta,this),t)}},u.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,oe(10),Ln(this),Hn(this))},u.Sa=function(){null!=this.m&&(this.m=null,Ln(this),Kn(this),oe(19))},u.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(u=$n.prototype).ta=function(){},u.sa=function(){},u.ra=function(){},u.qa=function(){},u.Ja=function(){},tr.prototype.a=function(t,e){return new er(t,e)},I(er,Nt),er.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;oe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Jn(t,null,t.fa),Fn(t)},er.prototype.close=function(){xn(this.a)},er.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Un(this.a,e)}else this.l?((e={}).__data__=Dt(t),Un(this.a,e)):Un(this.a,t)},er.prototype.G=function(){this.a.f=null,delete this.f,xn(this.a),delete this.a,er.X.G.call(this)},I(nr,ve),I(rr,me),I(ir,$n),ir.prototype.ta=function(){Ot(this.a,"a")},ir.prototype.sa=function(t){Ot(this.a,new nr(t))},ir.prototype.ra=function(t){Ot(this.a,new rr(t))},ir.prototype.qa=function(){Ot(this.a,"b")},tr.prototype.createWebChannel=tr.prototype.a,er.prototype.send=er.prototype.h,er.prototype.open=er.prototype.g,er.prototype.close=er.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",fe.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Nt.prototype.listen=Nt.prototype.va,wn.prototype.listenOnce=wn.prototype.wa,wn.prototype.getLastError=wn.prototype.Qa,wn.prototype.getLastErrorCode=wn.prototype.ua,wn.prototype.getStatus=wn.prototype.W,wn.prototype.getResponseJson=wn.prototype.Pa,wn.prototype.getResponseText=wn.prototype.$,wn.prototype.send=wn.prototype.ba;var or=ue,ar=ce,sr=$t,ur=10,cr=11,hr=fe,lr=wn,fr=function(t,e){return(fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function pr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}fr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function dr(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function vr(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function mr(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var gr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();gr.o=-1;var yr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},br=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return pr(e,t),e}(Error),wr=new o.Yd("@firebase/firestore");function _r(){return wr.logLevel}function Ir(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(wr.logLevel<=o.in.DEBUG){var r=e.map(Sr);wr.debug.apply(wr,mr(["Firestore (8.4.0): "+t],r))}}function Tr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(wr.logLevel<=o.in.ERROR){var r=e.map(Sr);wr.error.apply(wr,mr(["Firestore (8.4.0): "+t],r))}}function Er(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(wr.logLevel<=o.in.WARN){var r=e.map(Sr);wr.warn.apply(wr,mr(["Firestore (8.4.0): "+t],r))}}function Sr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Ar(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.0) INTERNAL ASSERTION FAILED: "+t;throw Tr(e),new Error(e)}function kr(t,e){t||Ar()}function Nr(t,e){return t}function Or(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Rr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Or(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Dr(t,e){return t<e?-1:t>e?1:0}function Cr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Pr(t){return t+"\0"}var xr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new br(yr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new br(yr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new br(yr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new br(yr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Dr(this.nanoseconds,t.nanoseconds):Dr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Lr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new xr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Mr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ur(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Vr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ar(),void 0===n?n=t.length-e:n>t.length-e&&Ar(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new br(yr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Vr),qr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Br=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return qr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new br(yr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new br(yr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new br(yr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new br(yr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Vr),Kr=function(){function t(t){this.fields=t,t.sort(Br.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Cr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Gr=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Dr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Gr.EMPTY_BYTE_STRING=new Gr("");var Hr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(kr(!!t),"string"==typeof t){var e=0,n=Hr.exec(t);if(kr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Wr(t.seconds),nanos:Wr(t.nanos)}}function Wr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Xr(t){return"string"==typeof t?Gr.fromBase64String(t):Gr.fromUint8Array(t)}function Qr(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yr(t){var e=t.mapValue.fields.__previous_value__;return Qr(e)?Yr(e):e}function Jr(t){var e=zr(t.mapValue.fields.__local_write_time__.timestampValue);return new xr(e.seconds,e.nanos)}function Zr(t){return null==t}function $r(t){return 0===t&&1/t==-1/0}function ti(t){return"number"==typeof t&&Number.isInteger(t)&&!$r(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ei=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(jr.fromString(e))},t.fromName=function(e){return new t(jr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===jr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return jr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new jr(e.slice()))},t}();function ni(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qr(t)?4:10:Ar()}function ri(t,e){var n=ni(t);if(n!==ni(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jr(t).isEqual(Jr(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=zr(t.timestampValue),r=zr(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Xr(t.bytesValue).isEqual(Xr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Wr(t.geoPointValue.latitude)===Wr(e.geoPointValue.latitude)&&Wr(t.geoPointValue.longitude)===Wr(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Wr(t.integerValue)===Wr(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Wr(t.doubleValue),r=Wr(e.doubleValue);return n===r?$r(n)===$r(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Cr(t.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Mr(n)!==Mr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ri(n[i],r[i])))return!1;return!0}(t,e);default:return Ar()}}function ii(t,e){return void 0!==(t.values||[]).find((function(t){return ri(t,e)}))}function oi(t,e){var n=ni(t),r=ni(e);if(n!==r)return Dr(n,r);switch(n){case 0:return 0;case 1:return Dr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Wr(t.integerValue||t.doubleValue),r=Wr(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ai(t.timestampValue,e.timestampValue);case 4:return ai(Jr(t),Jr(e));case 5:return Dr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Xr(t),r=Xr(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Dr(n[i],r[i]);if(0!==o)return o}return Dr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Dr(Wr(t.latitude),Wr(e.latitude));return 0!==n?n:Dr(Wr(t.longitude),Wr(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=oi(n[i],r[i]);if(o)return o}return Dr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Dr(r[a],o[a]);if(0!==s)return s;var u=oi(n[r[a]],i[o[a]]);if(0!==u)return u}return Dr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ar()}}function ai(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Dr(t,e);var n=zr(t),r=zr(e),i=Dr(n.seconds,r.seconds);return 0!==i?i:Dr(n.nanos,r.nanos)}function si(t){return ui(t)}function ui(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=zr(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Xr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ei.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ui(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ui(t.fields[o])}return e+"}"}(t.mapValue):Ar();var e,n}function ci(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function hi(t){return!!t&&"integerValue"in t}function li(t){return!!t&&"arrayValue"in t}function fi(t){return!!t&&"nullValue"in t}function pi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function di(t){return!!t&&"mapValue"in t}var vi=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Br.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return ri(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ni(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=di(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)})),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Br.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!di(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function mi(t){var e=[];return Ur(t.fields||{},(function(t,n){var r=new Br([t]);if(di(n)){var i=mi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Kr(e)}var gi=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Lr.min(),vi.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,vi.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,vi.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=vi.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=vi.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),yi=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function bi(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new yi(t,e,n,r,i,o,a)}function wi(t){var e=Nr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+si(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Zr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Pi(e.startAt)),e.endAt&&(n+="|ub:",n+=Pi(e.endAt)),e.h=n}return e.h}function _i(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Li(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ri(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ui(t.startAt,e.startAt)&&Ui(t.endAt,e.endAt)}function Ii(t){return ei.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ti=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return pr(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ei(t,n,r):"array-contains"===n?new Ni(t,r):"in"===n?new Oi(t,r):"not-in"===n?new Ri(t,r):"array-contains-any"===n?new Di(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Si(t,n):new Ai(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(oi(e,this.value)):null!==e&&ni(this.value)===ni(e)&&this.m(oi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ar()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ei=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ei.fromName(r.referenceValue),i}return pr(e,t),e.prototype.matches=function(t){var e=ei.comparator(t.key,this.key);return this.m(e)},e}(Ti),Si=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ki(0,n),r}return pr(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ti),Ai=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ki(0,n),r}return pr(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ti);function ki(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ei.fromName(t.referenceValue)}))}var Ni=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return pr(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return li(e)&&ii(e.arrayValue,this.value)},e}(Ti),Oi=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return pr(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&ii(this.value.arrayValue,e)},e}(Ti),Ri=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return pr(e,t),e.prototype.matches=function(t){if(ii(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!ii(this.value.arrayValue,e)},e}(Ti),Di=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return pr(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!li(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ii(e.value.arrayValue,t)}))},e}(Ti),Ci=function(t,e){this.position=t,this.before=e};function Pi(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return si(t)})).join(",")}var xi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Li(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Mi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?ei.comparator(ei.fromName(a.referenceValue),n.key):oi(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ui(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ri(t.position[n],e.position[n]))return!1;return!0}var Fi=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Vi(t,e,n,r,i,o,a,s){return new Fi(t,e,n,r,i,o,a,s)}function ji(t){return new Fi(t)}function qi(t){return!Zr(t.limit)&&"F"===t.limitType}function Bi(t){return!Zr(t.limit)&&"L"===t.limitType}function Ki(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Gi(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Hi(t){return null!==t.collectionGroup}function zi(t){var e=Nr(t);if(null===e.p){e.p=[];var n=Gi(e),r=Ki(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new xi(n)),e.p.push(new xi(Br.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new xi(Br.keyField(),u))}}}return e.p}function Wi(t){var e=Nr(t);if(!e.T)if("F"===e.limitType)e.T=bi(e.path,e.collectionGroup,zi(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=zi(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new xi(o.field,a))}var s=e.endAt?new Ci(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Ci(e.startAt.position,!e.startAt.before):null;e.T=bi(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Xi(t,e,n){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qi(t,e){return _i(Wi(t),Wi(e))&&t.limitType===e.limitType}function Yi(t){return wi(Wi(t))+"|lt:"+t.limitType}function Ji(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+si(e.value);var e})).join(", ")+"]"),Zr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Pi(t.startAt)),t.endAt&&(e+=", endAt: "+Pi(t.endAt)),"Target("+e+")"}(Wi(t))+"; limitType="+t.limitType+")"}function Zi(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ei.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Mi(t.startAt,zi(t),e)||t.endAt&&Mi(t.endAt,zi(t),e))}(t,e)}function $i(t){return function(e,n){for(var r=!1,i=0,o=zi(t);i<o.length;i++){var a=o[i],s=to(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function to(t,e,n){var r=t.field.isKeyField()?ei.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?oi(r,i):Ar()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ar()}}function eo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$r(e)?"-0":e}}function no(t){return{integerValue:""+t}}function ro(t,e){return ti(e)?no(e):eo(t,e)}var io=function(){this._=void 0};function oo(t,e,n){return t instanceof uo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof co?ho(t,e):t instanceof lo?fo(t,e):function(t,e){var n=so(t,e),r=vo(n)+vo(t.A);return hi(n)&&hi(t.A)?no(r):eo(t.R,r)}(t,e)}function ao(t,e,n){return t instanceof co?ho(t,e):t instanceof lo?fo(t,e):n}function so(t,e){return t instanceof po?hi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e}(io),co=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return pr(e,t),e}(io);function ho(t,e){for(var n=mo(e),r=function(t){n.some((function(e){return ri(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var lo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return pr(e,t),e}(io);function fo(t,e){for(var n=mo(e),r=function(t){n=n.filter((function(e){return!ri(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var po=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return pr(e,t),e}(io);function vo(t){return Wr(t.integerValue||t.doubleValue)}function mo(t){return li(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var go=function(t,e){this.field=t,this.transform=e},yo=function(t,e){this.version=t,this.transformResults=e},bo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function wo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var _o=function(){};function Io(t,e,n){t instanceof ko?function(t,e,n){var r=t.value.clone(),i=Ro(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof No?function(t,e,n){if(wo(t.precondition,e)){var r=Ro(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Oo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function To(t,e,n){t instanceof ko?function(t,e,n){if(wo(t.precondition,e)){var r=t.value.clone(),i=Do(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ao(e),r).setHasLocalMutations()}}(t,e,n):t instanceof No?function(t,e,n){if(wo(t.precondition,e)){var r=Do(t.fieldTransforms,n,e),i=e.data;i.setAll(Oo(t)),i.setAll(r),e.convertToFoundDocument(Ao(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){wo(t.precondition,e)&&e.convertToNoDocument(Lr.min())}(t,e)}function Eo(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=so(o.transform,a||null);null!=s&&(null==n&&(n=vi.empty()),n.set(o.field,s))}return n||null}function So(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Cr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof co&&e instanceof co||t instanceof lo&&e instanceof lo?Cr(t.elements,e.elements,ri):t instanceof po&&e instanceof po?ri(t.A,e.A):t instanceof uo&&e instanceof uo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ao(t){return t.isFoundDocument()?t.version:Lr.min()}var ko=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return pr(e,t),e}(_o),No=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return pr(e,t),e}(_o);function Oo(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Ro(t,e,n){var r=new Map;kr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,ao(a,s,n[i]))}return r}function Do(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,oo(s,u,e))}return r}var Co,Po,xo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return pr(e,t),e}(_o),Lo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return pr(e,t),e}(_o),Mo=function(t){this.count=t};function Uo(t){switch(t){case yr.OK:return Ar();case yr.CANCELLED:case yr.UNKNOWN:case yr.DEADLINE_EXCEEDED:case yr.RESOURCE_EXHAUSTED:case yr.INTERNAL:case yr.UNAVAILABLE:case yr.UNAUTHENTICATED:return!1;case yr.INVALID_ARGUMENT:case yr.NOT_FOUND:case yr.ALREADY_EXISTS:case yr.PERMISSION_DENIED:case yr.FAILED_PRECONDITION:case yr.ABORTED:case yr.OUT_OF_RANGE:case yr.UNIMPLEMENTED:case yr.DATA_LOSS:return!0;default:return Ar()}}function Fo(t){if(void 0===t)return Tr("GRPC error has no .code"),yr.UNKNOWN;switch(t){case Co.OK:return yr.OK;case Co.CANCELLED:return yr.CANCELLED;case Co.UNKNOWN:return yr.UNKNOWN;case Co.DEADLINE_EXCEEDED:return yr.DEADLINE_EXCEEDED;case Co.RESOURCE_EXHAUSTED:return yr.RESOURCE_EXHAUSTED;case Co.INTERNAL:return yr.INTERNAL;case Co.UNAVAILABLE:return yr.UNAVAILABLE;case Co.UNAUTHENTICATED:return yr.UNAUTHENTICATED;case Co.INVALID_ARGUMENT:return yr.INVALID_ARGUMENT;case Co.NOT_FOUND:return yr.NOT_FOUND;case Co.ALREADY_EXISTS:return yr.ALREADY_EXISTS;case Co.PERMISSION_DENIED:return yr.PERMISSION_DENIED;case Co.FAILED_PRECONDITION:return yr.FAILED_PRECONDITION;case Co.ABORTED:return yr.ABORTED;case Co.OUT_OF_RANGE:return yr.OUT_OF_RANGE;case Co.UNIMPLEMENTED:return yr.UNIMPLEMENTED;case Co.DATA_LOSS:return yr.DATA_LOSS;default:return Ar()}}(Po=Co||(Co={}))[Po.OK=0]="OK",Po[Po.CANCELLED=1]="CANCELLED",Po[Po.UNKNOWN=2]="UNKNOWN",Po[Po.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Po[Po.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Po[Po.NOT_FOUND=5]="NOT_FOUND",Po[Po.ALREADY_EXISTS=6]="ALREADY_EXISTS",Po[Po.PERMISSION_DENIED=7]="PERMISSION_DENIED",Po[Po.UNAUTHENTICATED=16]="UNAUTHENTICATED",Po[Po.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Po[Po.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Po[Po.ABORTED=10]="ABORTED",Po[Po.OUT_OF_RANGE=11]="OUT_OF_RANGE",Po[Po.UNIMPLEMENTED=12]="UNIMPLEMENTED",Po[Po.INTERNAL=13]="INTERNAL",Po[Po.UNAVAILABLE=14]="UNAVAILABLE",Po[Po.DATA_LOSS=15]="DATA_LOSS";var Vo=function(){function t(t,e){this.comparator=t,this.root=e||qo.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qo.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new jo(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new jo(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new jo(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new jo(this.root,t,this.comparator,!0)},t}(),jo=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),qo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ar();if(this.right.isRed())throw Ar();var t=this.left.check();if(t!==this.right.check())throw Ar();return t+(this.isRed()?0:1)},t}();qo.EMPTY=null,qo.RED=!0,qo.BLACK=!1,qo.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new qo(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Bo=function(){function t(t){this.comparator=t,this.data=new Vo(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ko(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ko(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ko=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Go=new Vo(ei.comparator);function Ho(){return Go}var zo=new Vo(ei.comparator);function Wo(){return zo}var Xo=new Vo(ei.comparator);function Qo(){return Xo}var Yo=new Bo(ei.comparator);function Jo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Yo,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Zo=new Bo(Dr);function $o(){return Zo}var ta=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ea.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Lr.min(),r,$o(),Ho(),Jo())},t}(),ea=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Gr.EMPTY_BYTE_STRING,n,Jo(),Jo(),Jo())},t}(),na=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ra=function(t,e){this.targetId=t,this.V=e},ia=function(t,e,n,r){void 0===n&&(n=Gr.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},oa=function(){function t(){this.S=0,this.D=ua(),this.C=Gr.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Jo(),e=Jo(),n=Jo();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ar()}})),new ea(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=ua()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),aa=function(){function t(t){this.W=t,this.G=new Map,this.H=Ho(),this.J=sa(),this.Y=new Bo(Dr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Ar()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ii(i))if(0===n){var o=new ei(i.path);this.tt(e,o,gi.newNoDocument(o,Lr.min()))}else kr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Ii(o.target)){var a=new ei(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,gi.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=Jo();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ta(t,n,this.Y,this.H,r);return this.H=Ho(),this.J=sa(),this.Y=new Bo(Dr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new oa,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Bo(Dr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ir("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new oa),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function sa(){return new Vo(ei.comparator)}function ua(){return new Vo(ei.comparator)}var ca={asc:"ASCENDING",desc:"DESCENDING"},ha={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},la=function(t,e){this.databaseId=t,this.I=e};function fa(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function pa(t,e){return t.I?e.toBase64():e.toUint8Array()}function da(t,e){return fa(t,e.toTimestamp())}function va(t){return kr(!!t),Lr.fromTimestamp(function(t){var e=zr(t);return new xr(e.seconds,e.nanos)}(t))}function ma(t,e){return function(t){return new jr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ga(t){var e=jr.fromString(t);return kr(qa(e)),e}function ya(t,e){return ma(t.databaseId,e.path)}function ba(t,e){var n=ga(e);if(n.get(1)!==t.databaseId.projectId)throw new br(yr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new br(yr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ei(Ta(n))}function wa(t,e){return ma(t.databaseId,e)}function _a(t){var e=ga(t);return 4===e.length?jr.emptyPath():Ta(e)}function Ia(t){return new jr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ta(t){return kr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ea(t,e,n){return{name:ya(t,e),fields:n.toProto().mapValue.fields}}function Sa(t,e,n){var r=ba(t,e.name),i=va(e.updateTime),o=new vi({mapValue:{fields:e.fields}}),a=gi.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Aa(t,e){var n;if(e instanceof ko)n={update:Ea(t,e.key,e.value)};else if(e instanceof xo)n={delete:ya(t,e.key)};else if(e instanceof No)n={update:Ea(t,e.key,e.data),updateMask:ja(e.fieldMask)};else{if(!(e instanceof Lo))return Ar();n={verify:ya(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof uo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof co)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof lo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof po)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Ar()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:da(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ar()}(t,e.precondition)),n}function ka(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?bo.updateTime(va(t.updateTime)):void 0!==t.exists?bo.exists(t.exists):bo.none()}(e.currentDocument):bo.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)kr("REQUEST_TIME"===e.setToServerValue),n=new uo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new co(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new lo(i)}else"increment"in e?n=new po(t,e.increment):Ar();var o=Br.fromServerFormat(e.fieldPath);return new go(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ba(t,e.update.name),o=new vi({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Kr(e.map((function(t){return Br.fromServerFormat(t)})))}(e.updateMask);return new No(i,o,a,n,r)}return new ko(i,o,n,r)}if(e.delete){var s=ba(t,e.delete);return new xo(s,n)}if(e.verify){var u=ba(t,e.verify);return new Lo(u,n)}return Ar()}function Na(t,e){return{documents:[wa(t,e.path)]}}function Oa(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=wa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=wa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(pi(t.value))return{unaryFilter:{field:Ma(t.field),op:"IS_NAN"}};if(fi(t.value))return{unaryFilter:{field:Ma(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(pi(t.value))return{unaryFilter:{field:Ma(t.field),op:"IS_NOT_NAN"}};if(fi(t.value))return{unaryFilter:{field:Ma(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(t.field),op:La(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ma(t.field),direction:xa(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Zr(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Ca(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ca(e.endAt)),n}function Ra(t){var e=_a(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){kr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Da(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new xi(Ua(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Zr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Pa(n.startAt));var h=null;return n.endAt&&(h=Pa(n.endAt)),Vi(e,i,s,a,u,"F",c,h)}function Da(t){return t?void 0!==t.unaryFilter?[Va(t)]:void 0!==t.fieldFilter?[Fa(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Da(t)})).reduce((function(t,e){return t.concat(e)})):Ar():[]}function Ca(t){return{before:t.before,values:t.position}}function Pa(t){var e=!!t.before,n=t.values||[];return new Ci(n,e)}function xa(t){return ca[t]}function La(t){return ha[t]}function Ma(t){return{fieldPath:t.canonicalString()}}function Ua(t){return Br.fromServerFormat(t.fieldPath)}function Fa(t){return Ti.create(Ua(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ar()}}(t.fieldFilter.op),t.fieldFilter.value)}function Va(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ua(t.unaryFilter.field);return Ti.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ua(t.unaryFilter.field);return Ti.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ua(t.unaryFilter.field);return Ti.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ua(t.unaryFilter.field);return Ti.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ar()}}function ja(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function qa(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ba(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ga(e)),e=Ka(t.get(n),e);return Ga(e)}function Ka(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ga(t){return t+""}function Ha(t){var e=t.length;if(kr(e>=2),2===e)return kr(""===t.charAt(0)&&""===t.charAt(1)),jr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&Ar(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Ar()}o=a+2}return new jr(r)}var za=function(t,e){this.seconds=t,this.nanoseconds=e},Wa=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Wa.store="owner",Wa.key="owner";var Xa=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Xa.store="mutationQueues",Xa.keyPath="userId";var Qa=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Qa.store="mutations",Qa.keyPath="batchId",Qa.userMutationsIndex="userMutationsIndex",Qa.userMutationsKeyPath=["userId","batchId"];var Ya=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ba(e)]},t.key=function(t,e,n){return[t,Ba(e),n]},t}();Ya.store="documentMutations",Ya.PLACEHOLDER=new Ya;var Ja=function(t,e){this.path=t,this.readTime=e},Za=function(t,e){this.path=t,this.version=e},$a=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};$a.store="remoteDocuments",$a.readTimeIndex="readTimeIndex",$a.readTimeIndexPath="readTime",$a.collectionReadTimeIndex="collectionReadTimeIndex",$a.collectionReadTimeIndexPath=["parentPath","readTime"];var ts=function(t){this.byteSize=t};ts.store="remoteDocumentGlobal",ts.key="remoteDocumentGlobalKey";var es=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};es.store="targets",es.keyPath="targetId",es.queryTargetsIndexName="queryTargetsIndex",es.queryTargetsKeyPath=["canonicalId","targetId"];var ns=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ns.store="targetDocuments",ns.keyPath=["targetId","path"],ns.documentTargetsIndex="documentTargetsIndex",ns.documentTargetsKeyPath=["path","targetId"];var rs=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};rs.key="targetGlobalKey",rs.store="targetGlobal";var is=function(t,e){this.collectionId=t,this.parent=e};is.store="collectionParents",is.keyPath=["collectionId","parent"];var os=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};os.store="clientMetadata",os.keyPath="clientId";var as=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};as.store="bundles",as.keyPath="bundleId";var ss=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ss.store="namedQueries",ss.keyPath="name";var us=mr(mr([],mr(mr([],mr(mr([],mr(mr([],[Xa.store,Qa.store,Ya.store,$a.store,es.store,Wa.store,rs.store,ns.store]),[os.store])),[ts.store])),[is.store])),[as.store,ss.store]),cs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hs=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),ls=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},fs=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Ar(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ps=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new ls,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ms(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=_s(e.target.error);n.ft.reject(new ms(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ms(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ir("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ys(e)},t}(),ds=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,i.z$)())&&Tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ir("SimpleDb","Removing database:",t),bs(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,i.z$)(),n=t._t(e),r=0<n&&n<10,o=t.Et(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return dr(this,void 0,void 0,(function(){var e,n=this;return vr(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ir("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ms(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new br(yr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ms(t,n))},i.onupgradeneeded=function(t){Ir("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ir("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return dr(this,void 0,void 0,(function(){var i,o,a,s,u;return vr(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return vr(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=l.sent(),e=ps.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),fs.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,Ir("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),vs=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return bs(this.Pt.delete())},t}(),ms=function(t){function e(e,n){var r=this;return(r=t.call(this,yr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return pr(e,t),e}(br);function gs(t){return"IndexedDbTransactionError"===t.name}var ys=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ir("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ir("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),bs(n)},t.prototype.add=function(t){return Ir("SimpleDb","ADD",this.store.name,t,t),bs(this.store.add(t))},t.prototype.get=function(t){var e=this;return bs(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ir("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ir("SimpleDb","DELETE",this.store.name,t),bs(this.store.delete(t))},t.prototype.count=function(){return Ir("SimpleDb","COUNT",this.store.name),bs(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Ir("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new fs((function(n,r){e.onerror=function(t){var e=_s(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new fs((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new vs(i),a=e(i.primaryKey,i.value,o);if(a instanceof fs){var s=a.catch((function(t){return o.done(),fs.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return fs.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function bs(t){return new fs((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=_s(t.target.error);n(e)}}))}var ws=!1;function _s(t){var e=ds._t((0,i.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new br("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ws||(ws=!0,setTimeout((function(){throw r}),0)),r}}return t}var Is=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return pr(e,t),e}(hs);function Ts(t,e){var n=Nr(t);return ds.It(n.Mt,e)}var Es=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Io(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&To(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&To(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Lr.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Jo())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Cr(this.mutations,t.mutations,(function(t,e){return So(t,e)}))&&Cr(this.baseMutations,t.baseMutations,(function(t,e){return So(t,e)}))},t}(),Ss=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){kr(e.mutations.length===r.length);for(var i=Qo(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),As=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Lr.min()),void 0===o&&(o=Lr.min()),void 0===a&&(a=Gr.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ks=function(t){this.Lt=t};function Ns(t,e){if(e.document)return Sa(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ei.fromSegments(e.noDocument.path),r=Ps(e.noDocument.readTime),i=gi.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ei.fromSegments(e.unknownDocument.path);return r=Ps(e.unknownDocument.version),gi.newUnknownDocument(o,r)}return Ar()}function Os(t,e,n){var r=Rs(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:ya(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:fa(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new $a(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Cs(e.version);return a=e.hasCommittedMutations,new $a(null,new Ja(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Cs(e.version);return new $a(new Za(c,h),null,null,!0,r,i)}return Ar()}function Rs(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ds(t){var e=new xr(t[0],t[1]);return Lr.fromTimestamp(e)}function Cs(t){var e=t.toTimestamp();return new za(e.seconds,e.nanoseconds)}function Ps(t){var e=new xr(t.seconds,t.nanoseconds);return Lr.fromTimestamp(e)}function xs(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ka(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return ka(t.Lt,e)})),s=xr.fromMillis(e.localWriteTimeMs);return new Es(e.batchId,s,n,a)}function Ls(t){var e,n,r=Ps(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ps(t.lastLimboFreeSnapshotVersion):Lr.min();return void 0!==t.query.documents?(kr(1===(n=t.query).documents.length),e=Wi(ji(_a(n.documents[0])))):e=function(t){return Wi(Ra(t))}(t.query),new As(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Gr.fromBase64String(t.resumeToken))}function Ms(t,e){var n,r=Cs(e.snapshotVersion),i=Cs(e.lastLimboFreeSnapshotVersion);n=Ii(e.target)?Na(t.Lt,e.target):Oa(t.Lt,e.target);var o=e.resumeToken.toBase64();return new es(e.targetId,wi(e.target),r,o,e.sequenceNumber,i,n)}function Us(t){var e=Ra({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Xi(e,e.limit,"L"):e}var Fs=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Vs(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ps(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Vs(t).put({bundleId:(n=e).id,createTime:Cs(va(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return js(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Us(e.bundledQuery),readTime:Ps(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return js(t).put(function(t){return{name:t.name,readTime:Cs(va(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Vs(t){return Ts(t,as.store)}function js(t){return Ts(t,ss.store)}var qs=function(){function t(){this.Bt=new Bs}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),fs.resolve()},t.prototype.getCollectionParents=function(t,e){return fs.resolve(this.Bt.getEntries(e))},t}(),Bs=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Bo(jr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Bo(jr.comparator)).toArray()},t}(),Ks=function(){function t(){this.qt=new Bs}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Ba(i)};return Gs(t).put(o)}return fs.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Pr(e),""],!1,!0);return Gs(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ha(o.parent))}return n}))},t}();function Gs(t){return Ts(t,is.store)}var Hs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zs=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Ws(t,e,n){var r=t.store(Qa.store),i=t.store(Ya.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){kr(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Ya.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return fs.waitFor(o).next((function(){return c}))}function Xs(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ar();e=t.noDocument}return JSON.stringify(e).length}zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(41943040,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);var Qs=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return kr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Js(t).Ot({index:Qa.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Zs(t),a=Js(t);return a.add({}).next((function(s){kr("number"==typeof s);for(var u=new Es(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Aa(t.Lt,e)})),i=n.mutations.map((function(e){return Aa(t.Lt,e)}));return new Qa(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Bo((function(t,e){return Dr(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Ya.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,Ya.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),fs.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Js(t).get(e).next((function(t){return t?(kr(t.userId===n.userId),xs(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?fs.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Js(t).Ot({index:Qa.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(kr(e.batchId>=r),o=xs(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Js(t).Ot({index:Qa.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Js(t).Nt(Qa.userMutationsIndex,n).next((function(t){return t.map((function(t){return xs(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ya.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Zs(t).Ot({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=Ha(u);if(s===n.userId&&e.path.isEqual(h))return Js(t).get(c).next((function(t){if(!t)throw Ar();kr(t.userId===n.userId),o.push(xs(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Bo(Dr),i=[];return e.forEach((function(e){var o=Ya.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Zs(t).Ot({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Ha(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),fs.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ya.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Bo(Dr);return Zs(t).Ot({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=Ha(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Js(t).get(e).next((function(t){if(null===t)throw Ar();kr(t.userId===n.userId),r.push(xs(n.R,t))})))})),fs.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Ws(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),fs.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return fs.resolve();var r=IDBKeyRange.lowerBound(Ya.prefixForUser(e.userId)),i=[];return Zs(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ha(t[1]);i.push(o)}else r.done()})).next((function(){kr(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Ys(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return $s(t).get(this.userId).next((function(t){return t||new Xa(e.userId,-1,"")}))},t}();function Ys(t,e,n){var r=Ya.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Zs(t).Ot({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Js(t){return Ts(t,Qa.store)}function Zs(t){return Ts(t,Ya.store)}function $s(t){return Ts(t,Xa.store)}var tu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),eu=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new tu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Lr.fromTimestamp(new xr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return nu(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return kr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return nu(t).Ot((function(a,s){var u=Ls(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return fs.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return nu(t).Ot((function(t,n){var r=Ls(n);e(r)}))},t.prototype.Xt=function(t){return ru(t).get(rs.key).next((function(t){return kr(null!==t),t}))},t.prototype.Zt=function(t,e){return ru(t).put(rs.key,e)},t.prototype.te=function(t,e){return nu(t).put(Ms(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=wi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return nu(t).Ot({range:r,index:es.queryTargetsIndexName},(function(t,n,r){var o=Ls(n);_i(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=iu(t);return e.forEach((function(e){var a=Ba(e.path);i.push(o.put(new ns(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),fs.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=iu(t);return fs.forEach(e,(function(e){var o=Ba(e.path);return fs.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=iu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=iu(t),i=Jo();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=Ha(t[1]),o=new ei(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Ba(e.path),r=IDBKeyRange.bound([n],[Pr(n)],!1,!0),i=0;return iu(t).Ot({index:ns.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return nu(t).get(e).next((function(t){return t?Ls(t):null}))},t}();function nu(t){return Ts(t,es.store)}function ru(t){return Ts(t,rs.store)}function iu(t){return Ts(t,ns.store)}function ou(t){return dr(this,void 0,void 0,(function(){return vr(this,(function(e){if(t.code!==yr.FAILED_PRECONDITION||t.message!==cs)throw t;return Ir("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function au(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Dr(n,i);return 0===a?Dr(r,o):a}var su=function(){function t(t){this.ne=t,this.buffer=new Bo(au),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();au(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),uu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ir("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return dr(e,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return gs(e=n.sent())?(Ir("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ou(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),cu=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return fs.resolve(gr.o);var r=new su(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ir("LruGarbageCollector","Garbage collection skipped; disabled"),fs.resolve(Hs)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ir("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Hs):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,a,s,u,c,h=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>h.params.maximumSequenceNumbersToCollect?(Ir("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+e),r=h.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),h.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),h.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),h.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),_r()<=o.in.DEBUG&&Ir("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),fs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),hu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new cu(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return lu(t,n)},t.prototype.removeReference=function(t,e,n){return lu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return lu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return $s(t).$t((function(r){return Ys(t,r,e).next((function(t){return t&&(n=!0),fs.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),iu(t).delete([0,Ba(a.path)])}))}));i.push(u)}})).next((function(){return fs.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return lu(t,e)},t.prototype.we=function(t,e){var n,r=iu(t),i=gr.o;return r.Ot({index:ns.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==gr.o&&e(new ei(Ha(n)),i),i=s,n=a):i=gr.o})).next((function(){i!==gr.o&&e(new ei(Ha(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function lu(t,e){return iu(t).put(function(t,e){return new ns(0,Ba(t.path),e)}(e,t.currentSequenceNumber))}var fu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ur(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Fr(this.inner)},t}(),pu=function(){function t(){this.changes=new fu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Lr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:gi.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?fs.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),du=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return gu(t).put(yu(e),n)},t.prototype.removeEntry=function(t,e){var n=gu(t),r=yu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return gu(t).get(yu(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return gu(t).get(yu(e)).next((function(t){return{document:n.ye(e,t),size:Xs(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Ho();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Ho(),i=new Vo(ei.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Xs(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return fs.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return gu(t).Ot({range:r},(function(t,e,r){for(var a=ei.fromSegments(t);o&&ei.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ho(),o=e.path.length+1,a={};if(n.isEqual(Lr.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Rs(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=$a.collectionReadTimeIndex}return gu(t).Ot(a,(function(t,n,a){if(t.length===o){var s=Ns(r.R,n);e.path.isPrefixOf(s.key.path)?Zi(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new vu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return mu(t).get(ts.key).next((function(t){return kr(!!t),t}))},t.prototype.me=function(t,e){return mu(t).put(ts.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ns(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Lr.min()))return n}return gi.newInvalidDocument(t)},t}(),vu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new fu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return pr(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Bo((function(t,e){return Dr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Os(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Xs(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=Os(e.Ie.R,gi.newNoDocument(o,Lr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),fs.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(pu);function mu(t){return Ts(t,ts.store)}function gu(t){return Ts(t,$a.store)}function yu(t){return t.path.toArray()}var bu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;kr(n<r&&n>=0&&r<=11);var o=new ps("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Wa.store)}(t),function(t){t.createObjectStore(Xa.store,{keyPath:Xa.keyPath}),t.createObjectStore(Qa.store,{keyPath:Qa.keyPath,autoIncrement:!0}).createIndex(Qa.userMutationsIndex,Qa.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ya.store)}(t),wu(t),function(t){t.createObjectStore($a.store)}(t));var a=fs.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ns.store),t.deleteObjectStore(es.store),t.deleteObjectStore(rs.store)}(t),wu(t)),a=a.next((function(){return function(t){var e=t.store(rs.store),n=new rs(0,0,Lr.min().toTimestamp(),0);return e.put(rs.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Qa.store).Nt().next((function(n){t.deleteObjectStore(Qa.store),t.createObjectStore(Qa.store,{keyPath:Qa.keyPath,autoIncrement:!0}).createIndex(Qa.userMutationsIndex,Qa.userMutationsKeyPath,{unique:!0});var r=e.store(Qa.store),i=n.map((function(t){return r.put(t)}));return fs.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(os.store,{keyPath:os.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(ts.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore($a.store);e.createIndex($a.readTimeIndex,$a.readTimeIndexPath,{unique:!1}),e.createIndex($a.collectionReadTimeIndex,$a.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(as.store,{keyPath:as.keyPath})}(t),function(t){t.createObjectStore(ss.store,{keyPath:ss.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store($a.store).Ot((function(t,n){e+=Xs(n)})).next((function(){var n=new ts(e);return t.store(ts.store).put(ts.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Xa.store),r=t.store(Qa.store);return n.Nt().next((function(n){return fs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Qa.userMutationsIndex,i).next((function(r){return fs.forEach(r,(function(r){kr(r.userId===n.userId);var i=xs(e.R,r);return Ws(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(ns.store),n=t.store($a.store);return t.store(rs.store).get(rs.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new jr(n),a=function(t){return[0,Ba(t)]}(o);r.push(e.get(a).next((function(n){return n?fs.resolve():function(n){return e.put(new ns(0,Ba(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return fs.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(is.store,{keyPath:is.keyPath});var n=e.store(is.store),r=new Bs,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ba(i)})}};return e.store($a.store).Ot({kt:!0},(function(t,e){var n=new jr(t);return i(n.popLast())})).next((function(){return e.store(Ya.store).Ot({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Ha(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(es.store);return n.Ot((function(t,r){var i=Ls(r),o=Ms(e.R,i);return n.put(o)}))},t}();function wu(t){t.createObjectStore(ns.store,{keyPath:ns.keyPath}).createIndex(ns.documentTargetsIndex,ns.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(es.store,{keyPath:es.keyPath}).createIndex(es.queryTargetsIndexName,es.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(rs.store)}var _u="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Iu=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new br(yr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hu(this,i),this.Le=n+"main",this.R=new ks(u),this.Be=new ds(this.Le,11,new bu(this.R)),this.qe=new eu(this.referenceDelegate,this.R),this.Ut=new Ks,this.Ue=function(t,e){return new du(t,e)}(this.R,this.Ut),this.Qe=new Fs,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===h&&Tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new br(yr.FAILED_PRECONDITION,_u);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new gr(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return dr(e,void 0,void 0,(function(){return vr(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return dr(e,void 0,void 0,(function(){return vr(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return dr(e,void 0,void 0,(function(){return vr(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Eu(e).put(new os(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(gs(e))return Ir("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ir("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Tu(t).get(Wa.key).next((function(t){return fs.resolve(e.tn(t))}))},t.prototype.en=function(t){return Eu(t).delete(this.clientId)},t.prototype.nn=function(){return dr(this,void 0,void 0,(function(){var t,e,n,r,i=this;return vr(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Ts(t,os.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return fs.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?fs.resolve(!0):Tu(t).get(Wa.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new br(yr.FAILED_PRECONDITION,_u);return!1}}return!(!e.networkEnabled||!e.inForeground)||Eu(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ir("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return dr(this,void 0,void 0,(function(){var t=this;return vr(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Wa.store,os.store],(function(e){var n=new Is(e,gr.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Eu(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Qs.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Ir("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,us,(function(o){return i=new Is(o,r.Ne?r.Ne.next():gr.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Tr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new br(yr.FAILED_PRECONDITION,cs);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Tu(t).get(Wa.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new br(yr.FAILED_PRECONDITION,_u)}))},t.prototype.Ze=function(t){var e=new Wa(this.clientId,this.allowTabSynchronization,Date.now());return Tu(t).put(Wa.key,e)},t.yt=function(){return ds.yt()},t.prototype.Xe=function(t){var e=this,n=Tu(t);return n.get(Wa.key).next((function(t){return e.tn(t)?(Ir("IndexedDbPersistence","Releasing primary lease."),n.delete(Wa.key)):fs.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Tr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Ir("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Tr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Tr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Tu(t){return Ts(t,Wa.store)}function Eu(t){return Ts(t,os.store)}function Su(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Au=function(t,e){this.progress=t,this.wn=e},ku=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ei.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Hi(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ei(e)).next((function(t){var e=Wo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Wo();return this.Ut.getCollectionParents(t,i).next((function(a){return fs.forEach(a,(function(a){var s=function(t,e){return new Fi(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=gi.newInvalidDocument(c),r=r.insert(c,h)),To(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Zi(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Jo(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof No&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Nu=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Jo(),i=Jo(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ou=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Lr.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(a){var s=i.Cn(e,a);return(qi(e)||Bi(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(_r()<=o.in.DEBUG&&Ir("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ji(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Bo($i(t));return e.forEach((function(e,r){Zi(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return _r()<=o.in.DEBUG&&Ir("QueryEngine","Using full collection scan to execute query:",Ji(e)),this.Sn.getDocumentsMatchingQuery(t,e,Lr.min())},t}(),Ru=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Vo(Dr),this.kn=new fu((function(t){return wi(t)}),_i),this.On=Lr.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ku(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Du(t,e,n,r){return new Ru(t,e,n,r)}function Cu(t,e){return dr(this,void 0,void 0,(function(){var n,r,i,o;return vr(this,(function(a){switch(a.label){case 0:return n=Nr(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new ku(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Jo(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var m=0,g=v.mutations;m<g.length;m++){var y=g[m];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Pu(t,e){var n=Nr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=fs.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);kr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function xu(t){var e=Nr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Lu(t,e){var n=Nr(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return kr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Ho();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Mu(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Lr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return fs.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Mu(t,e,n,r,i){var o=Jo();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ho();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Lr.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Ir("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Uu(t,e){var n=Nr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Fu(t,e){var n=Nr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,fs.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new As(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Vu(t,e,n){return dr(this,void 0,void 0,(function(){var r,i,o,a;return vr(this,(function(s){switch(s.label){case 0:r=Nr(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!gs(a=s.sent()))throw a;return Ir("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function ju(t,e,n){var r=Nr(t),i=Lr.min(),o=Jo();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Nr(t),i=r.kn.get(n);return void 0!==i?fs.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Wi(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Lr.min(),n?o:Jo())})).next((function(t){return{documents:t,Bn:o}}))}))}function qu(t,e){var n=Nr(t),r=Nr(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Bu(t){var e=Nr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Nr(t),i=Ho(),o=Rs(n),a=gu(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:$a.readTimeIndex,range:s},(function(t,e){var n=Ns(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Ds(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn,r=t.readTime;return e.On=r,n}))}function Ku(t){return dr(this,void 0,void 0,(function(){var e;return vr(this,(function(n){return[2,(e=Nr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=gu(t),n=Lr.min();return e.Ot({index:$a.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ds(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function Gu(t,e,n,r){return dr(this,void 0,void 0,(function(){var i,o,a,s,u,c,h,l,f,p;return vr(this,(function(d){switch(d.label){case 0:for(i=Nr(t),o=Jo(),a=Ho(),s=Qo(),u=0,c=n;u<c.length;u++)h=c[u],l=e.qn(h.metadata.name),h.document&&(o=o.add(l)),a=a.insert(l,e.Un(h)),s=s.insert(l,e.Qn(h.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Fu(i,function(t){return Wi(ji(jr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Mu(t,f,a,Lr.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Hu(t,e,n){return void 0===n&&(n=Jo()),dr(this,void 0,void 0,(function(){var r,i;return vr(this,(function(o){switch(o.label){case 0:return[4,Fu(t,Wi(Us(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Nr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=va(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(Gr.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var zu=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return fs.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:va(n.createTime)}),fs.resolve()},t.prototype.getNamedQuery=function(t,e){return fs.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Us(t.bundledQuery),readTime:va(t.readTime)}}(e)),fs.resolve()},t}(),Wu=function(){function t(){this.Wn=new Bo(Xu.Gn),this.zn=new Bo(Xu.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Xu(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Xu(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ei(new jr([])),r=new Xu(n,t),i=new Xu(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ei(new jr([])),n=new Xu(e,t),r=new Xu(e,t+1),i=Jo();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Xu(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Xu=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ei.comparator(t.key,e.key)||Dr(t.ns,e.ns)},t.Hn=function(t,e){return Dr(t.ns,e.ns)||ei.comparator(t.key,e.key)},t}(),Qu=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Bo(Xu.Gn)}return t.prototype.checkEmpty=function(t){return fs.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Es(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Xu(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return fs.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return fs.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return fs.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return fs.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return fs.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Xu(e,0),i=new Xu(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),fs.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Bo(Dr);return e.forEach((function(t){var e=new Xu(t,0),i=new Xu(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),fs.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ei.isDocumentKey(i)||(i=i.child(""));var o=new Xu(new ei(i),0),a=new Bo(Dr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),fs.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;kr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return fs.forEach(e.mutations,(function(i){var o=new Xu(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Xu(e,0),r=this.rs.firstAfterOrEqual(n);return fs.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,fs.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Yu=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Vo(ei.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return fs.resolve(n?n.document.clone():gi.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ho();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():gi.newInvalidDocument(t))})),fs.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ho(),i=new ei(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||Zi(e,c)&&(r=r.insert(c.key,c.clone()))}return fs.resolve(r)},t.prototype.fs=function(t,e){return fs.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Ju(this)},t.prototype.getSize=function(t){return fs.resolve(this.size)},t}(),Ju=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return pr(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),fs.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(pu),Zu=function(){function t(t){this.persistence=t,this.ds=new fu((function(t){return wi(t)}),_i),this.lastRemoteSnapshotVersion=Lr.min(),this.highestTargetId=0,this.ws=0,this._s=new Wu,this.targetCount=0,this.ys=tu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),fs.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return fs.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return fs.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),fs.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),fs.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new tu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,fs.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),fs.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,fs.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),fs.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return fs.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return fs.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),fs.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),fs.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),fs.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return fs.resolve(n)},t.prototype.containsKey=function(t,e){return fs.resolve(this._s.containsKey(e))},t}(),$u=function(){function t(t,e){var n=this;this.gs={},this.Ne=new gr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Zu(this),this.Ut=new qs,this.Ue=function(t,e){return new Yu(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new ks(e),this.Qe=new zu(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Qu(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Ir("MemoryPersistence","Starting transaction:",t);var i=new tc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return fs.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),tc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return pr(e,t),e}(hs),ec=function(){function t(t){this.persistence=t,this.As=new Wu,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Ar()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),fs.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),fs.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),fs.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fs.forEach(this.vs,(function(r){var i=ei.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return fs.or([function(){return fs.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),nc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function rc(t,e){return"firestore_clients_"+t+"_"+e}function ic(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function oc(t,e){return"firestore_targets_"+t+"_"+e}nc.UNAUTHENTICATED=new nc(null),nc.GOOGLE_CREDENTIALS=new nc("google-credentials-uid"),nc.FIRST_PARTY=new nc("first-party-uid");var ac=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new br(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Tr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),sc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new br(i.error.code,i.error.message)),o?new t(e,i.state,r):(Tr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),uc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=$o(),a=0;i&&a<r.activeTargetIds.length;++a)i=ti(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Tr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),cc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Tr("SharedClientState","Failed to parse online state: "+e),null)},t}(),hc=function(){function t(){this.activeTargetIds=$o()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),lc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Vo(Dr),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=rc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new hc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return dr(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return vr(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(rc(this.persistenceKey,r)))&&(o=uc.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)h=c[u],this.Fs(h);return this.Os=[],this.window.addEventListener("unload",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(oc(this.persistenceKey,t));if(n){var r=sc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(oc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ir("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ir("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ir("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ir("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return dr(e,void 0,void 0,(function(){var t,e,r,i,o,a;return vr(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=gr.o;if(null!=t)try{var n=JSON.parse(t);kr("number"==typeof n),e=n}catch(t){Tr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==gr.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new ac(this.currentUser,t,e,n),i=ic(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=ic(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=oc(this.persistenceKey,t),i=new sc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return uc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ac.Vs(new nc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return sc.Vs(r,e)},t.prototype.js=function(t){return cc.Vs(t)},t.prototype.ii=function(t){return dr(this,void 0,void 0,(function(){return vr(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ir("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=$o();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),fc=function(){function t(){this.li=new hc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new hc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),pc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),dc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ir("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ir("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),vc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},mc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),gc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return pr(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new lr;a.listenOnce(ar.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case or.NO_ERROR:var e=a.getResponseJson();Ir("Connection","XHR received:",JSON.stringify(e)),i(e);break;case or.TIMEOUT:Ir("Connection",'RPC "'+t+'" timed out'),o(new br(yr.DEADLINE_EXCEEDED,"Request time out"));break;case or.HTTP_ERROR:var n=a.getStatus();if(Ir("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(yr).indexOf(e)>=0?e:yr.UNKNOWN}(r.status);o(new br(s,r.message))}else o(new br(yr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new br(yr.UNAVAILABLE,"Connection failed."));break;default:Ar()}}finally{Ir("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new tr,o=ee(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(a.initMessageHeaders,e),(0,i.uI)()||(0,i.b$)()||(0,i.d)()||(0,i.w1)()||(0,i.Mn)()||(0,i.ru)()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Ir("Connection","Creating WebChannel: "+s,a);var u=r.createWebChannel(s,a),c=!1,h=!1,l=new mc({Ei:function(t){h?Ir("Connection","Not sending because WebChannel is closed:",t):(c||(Ir("Connection","Opening WebChannel transport."),u.open(),c=!0),Ir("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,hr.EventType.OPEN,(function(){h||Ir("Connection","WebChannel transport opened.")})),f(u,hr.EventType.CLOSE,(function(){h||(h=!0,Ir("Connection","WebChannel transport closed"),l.Vi())})),f(u,hr.EventType.ERROR,(function(t){h||(h=!0,Er("Connection","WebChannel transport errored:",t),l.Vi(new br(yr.UNAVAILABLE,"The operation could not be completed")))})),f(u,hr.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];kr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ir("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Co[t];if(void 0!==e)return Fo(e)}(o),s=i.message;void 0===a&&(a=yr.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new br(a,s)),u.close()}else Ir("Connection","WebChannel received:",n),l.Si(n)}})),f(o,sr.STAT_EVENT,(function(t){t.stat===ur?Ir("Connection","Detected buffering proxy"):t.stat===cr&&Ir("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ir("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Ir("RestConnection","Received: ",t),t}),(function(e){throw Er("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.0",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=vc[t];return this.Di+"/v1/"+e+":"+n},t}());function yc(){return"undefined"!=typeof window?window:null}function bc(){return"undefined"!=typeof document?document:null}function wc(t){return new la(t,!0)}var _c=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Ir("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ic=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new _c(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return dr(this,void 0,void 0,(function(){return vr(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return dr(this,void 0,void 0,(function(){return vr(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return dr(this,void 0,void 0,(function(){return vr(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===yr.RESOURCE_EXHAUSTED?(Tr(e.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===yr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new br(yr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return dr(t,void 0,void 0,(function(){return vr(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ir("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ir("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Tc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return pr(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ar()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(kr(void 0===e||"string"==typeof e),Gr.fromBase64String(e||"")):(kr(void 0===e||e instanceof Uint8Array),Gr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?yr.UNKNOWN:Fo(t.code);return new br(e,t.message||"")}(s);n=new ia(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ba(t,r.document.name),o=va(r.document.updateTime);var s=new vi({mapValue:{fields:r.document.fields}}),u=(a=gi.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new na(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ba(t,r.document),o=r.readTime?va(r.readTime):Lr.min(),s=gi.newNoDocument(i,o),a=r.removedTargetIds||[],n=new na([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ba(t,r.document),o=r.removedTargetIds||[],n=new na([],o,i,null);else{if(!("filter"in e))return Ar();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Mo(r),o=h.targetId,n=new ra(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Lr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Lr.min():e.readTime?va(e.readTime):Lr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ia(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ii(r)?{documents:Na(t,r)}:{query:Oa(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=pa(t,e.resumeToken):e.snapshotVersion.compareTo(Lr.min())>0&&(n.readTime=fa(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ar()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ia(this.R),e.removeTarget=t,this.cr(e)},e}(Ic),Ec=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return pr(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(kr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(kr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?va(t.updateTime):va(e);return n.isEqual(Lr.min())&&(n=va(e)),new yo(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=va(t.commitTime);return this.listener.Tr(n,e)}return kr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ia(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Aa(e.R,t)}))};this.cr(n)},e}(Ic),Sc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return pr(e,t),e.prototype.br=function(){if(this.Rr)throw new br(yr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw t.code===yr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw t.code===yr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.terminate=function(){this.Rr=!1},e}((function(){})),Ac=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Tr(e),this.Vr=!1):Ir("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),kc=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return dr(o,void 0,void 0,(function(){return vr(this,(function(t){switch(t.label){case 0:return Mc(this)?(Ir("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return dr(this,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:return(e=Nr(t)).$r.add(4),[4,Oc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Nc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Ac(n,r)};function Nc(t){return dr(this,void 0,void 0,(function(){var e,n;return vr(this,(function(r){switch(r.label){case 0:if(!Mc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Oc(t){return dr(this,void 0,void 0,(function(){var e,n;return vr(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Rc(t,e){var n=Nr(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Lc(n)?xc(n):Jc(n).er()&&Cc(n,e))}function Dc(t,e){var n=Nr(t),r=Jc(n);n.Or.delete(e),r.er()&&Pc(n,e),0===n.Or.size&&(r.er()?r.ir():Mc(n)&&n.Br.set("Unknown"))}function Cc(t,e){t.qr.U(e.targetId),Jc(t).mr(e)}function Pc(t,e){t.qr.U(e),Jc(t).yr(e)}function xc(t){t.qr=new aa({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Jc(t).start(),t.Br.Sr()}function Lc(t){return Mc(t)&&!Jc(t).tr()&&t.Or.size>0}function Mc(t){return 0===Nr(t).$r.size}function Uc(t){t.qr=void 0}function Fc(t){return dr(this,void 0,void 0,(function(){return vr(this,(function(e){return t.Or.forEach((function(e,n){Cc(t,e)})),[2]}))}))}function Vc(t,e){return dr(this,void 0,void 0,(function(){return vr(this,(function(n){return Uc(t),Lc(t)?(t.Br.Nr(e),xc(t)):t.Br.set("Unknown"),[2]}))}))}function jc(t,e,n){return dr(this,void 0,void 0,(function(){var r,i,o;return vr(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof ia&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return dr(this,void 0,void 0,(function(){var n,r,i,o;return vr(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Or.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Ir("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,qc(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof na?t.qr.X(e):e instanceof ra?t.qr.rt(e):t.qr.et(e),n.isEqual(Lr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,xu(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Gr.EMPTY_BYTE_STRING,n.snapshotVersion)),Pc(t,e);var r=new As(n.target,e,1,n.sequenceNumber);Cc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Ir("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,qc(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function qc(t,e,n){return dr(this,void 0,void 0,(function(){var r=this;return vr(this,(function(i){switch(i.label){case 0:if(!gs(e))throw e;return t.$r.add(1),[4,Oc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return xu(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return dr(r,void 0,void 0,(function(){return vr(this,(function(e){switch(e.label){case 0:return Ir("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Nc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Bc(t,e){return e().catch((function(n){return qc(t,n,e)}))}function Kc(t){return dr(this,void 0,void 0,(function(){var e,n,r,i,o;return vr(this,(function(a){switch(a.label){case 0:e=Nr(t),n=Zc(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Mc(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Uu(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Zc(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,qc(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Gc(e)&&Hc(e),[2]}}))}))}function Gc(t){return Mc(t)&&!Zc(t).tr()&&t.kr.length>0}function Hc(t){Zc(t).start()}function zc(t){return dr(this,void 0,void 0,(function(){return vr(this,(function(e){return Zc(t).Ar(),[2]}))}))}function Wc(t){return dr(this,void 0,void 0,(function(){var e,n,r,i;return vr(this,(function(o){for(e=Zc(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Xc(t,e,n){return dr(this,void 0,void 0,(function(){var r,i;return vr(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Ss.from(r,e,n),[4,Bc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Kc(t)];case 2:return o.sent(),[2]}}))}))}function Qc(t,e){return dr(this,void 0,void 0,(function(){return vr(this,(function(n){switch(n.label){case 0:return e&&Zc(t).pr?[4,function(t,e){return dr(this,void 0,void 0,(function(){var n,r;return vr(this,(function(i){switch(i.label){case 0:return Uo(r=e.code)&&r!==yr.ABORTED?(n=t.kr.shift(),Zc(t).sr(),[4,Bc(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Kc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Gc(t)&&Hc(t),[2]}}))}))}function Yc(t,e){return dr(this,void 0,void 0,(function(){var n;return vr(this,(function(r){switch(r.label){case 0:return n=Nr(t),e?(n.$r.delete(2),[4,Nc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Oc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Jc(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Nr(t);return r.br(),new Tc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Fc.bind(null,t),Ri:Vc.bind(null,t),_r:jc.bind(null,t)}),t.Mr.push((function(n){return dr(e,void 0,void 0,(function(){return vr(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Lc(t)?xc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Uc(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Zc(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Nr(t);return r.br(),new Ec(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:zc.bind(null,t),Ri:Qc.bind(null,t),Ir:Wc.bind(null,t),Tr:Xc.bind(null,t)}),t.Mr.push((function(n){return dr(e,void 0,void 0,(function(){return vr(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Kc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Ir("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var $c=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new br(yr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function th(t,e){if(Tr("AsyncQueue",e+": "+t),gs(t))return new br(yr.UNAVAILABLE,e+": "+t);throw t}var eh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ei.comparator(e.key,n.key)}:function(t,e){return ei.comparator(t.key,e.key)},this.keyedMap=Wo(),this.sortedSet=new Vo(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),nh=function(){function t(){this.Kr=new Vo(ei.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Ar():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),rh=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,eh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ih=function(){this.Wr=void 0,this.listeners=[]},oh=function(){this.queries=new fu((function(t){return Yi(t)}),Qi),this.onlineState="Unknown",this.Gr=new Set};function ah(t,e){return dr(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return vr(this,(function(c){switch(c.label){case 0:if(n=Nr(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ih),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=th(s,"Initialization of query '"+Ji(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&hh(n),[2]}}))}))}function sh(t,e){return dr(this,void 0,void 0,(function(){var n,r,i,o,a;return vr(this,(function(s){return n=Nr(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function uh(t,e){for(var n=Nr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&hh(n)}function ch(t,e,n){var r=Nr(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function hh(t){t.Gr.forEach((function(t){t.next()}))}var lh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new rh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=rh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),fh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),ph=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ba(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Sa(this.R,t.document,!1):gi.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return va(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new ph(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||Jo()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return dr(this,void 0,void 0,(function(){var t,e,n,r,i;return vr(this,(function(o){switch(o.label){case 0:return[4,Gu(this.localStore,new ph(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Hu(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Au(Object.assign({},this.progress),t))]}}))}))}}();var dh=function(t){this.key=t},vh=function(t){this.key=t},mh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Jo(),this.mutatedKeys=Jo(),this.lo=$i(t),this.fo=new eh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new nh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=qi(this.query)&&i.size===this.query.limit?i.last():null,c=Bi(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=Zi(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),qi(this.query)||Bi(this.query))for(;a.size>this.query.limit;){var h=qi(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ar()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new rh(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new nh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Jo(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new vh(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new dh(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Jo();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return rh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),gh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},yh=function(t){this.key=t,this.bo=!1},bh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new fu((function(t){return Yi(t)}),Qi),this.Vo=new Map,this.So=new Set,this.Do=new Vo(ei.comparator),this.Co=new Map,this.No=new Wu,this.xo={},this.Fo=new Map,this.ko=tu.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function wh(t,e){return dr(this,void 0,void 0,(function(){var n,r,i,o,a,s;return vr(this,(function(u){switch(u.label){case 0:return n=Qh(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Fu(n.localStore,Wi(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,_h(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Rc(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function _h(t,e,n,r){return dr(this,void 0,void 0,(function(){var i,o,a,s,u,c;return vr(this,(function(h){switch(h.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return dr(this,void 0,void 0,(function(){var i,o,a;return vr(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,ju(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(xh(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,ju(t.localStore,e,!0)];case 1:return i=h.sent(),o=new mh(e,i.Bn),a=o._o(i.documents),s=ea.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),xh(t,n,u.To),c=new gh(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Ih(t,e){return dr(this,void 0,void 0,(function(){var n,r,i;return vr(this,(function(o){switch(o.label){case 0:return n=Nr(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Qi(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Vu(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Dc(n.remoteStore,r.targetId),Ch(n,r.targetId)})).catch(ou)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ch(n,r.targetId),[4,Vu(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Th(t,e,n){return dr(this,void 0,void 0,(function(){var r,i,o,a;return vr(this,(function(s){switch(s.label){case 0:r=Yh(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Nr(t),i=xr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Jo());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=Eo(c,n.get(c.key));null!=h&&a.push(new No(c.key,h,mi(h.toProto().mapValue),bo.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Vo(Dr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Uh(r,i.changes)];case 3:return s.sent(),[4,Kc(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=th(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Eh(t,e){return dr(this,void 0,void 0,(function(){var n,r;return vr(this,(function(i){switch(i.label){case 0:n=Nr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Lu(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(kr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?kr(r.bo):t.removedDocuments.size>0&&(kr(r.bo),r.bo=!1))})),[4,Uh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ou(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Sh(t,e,n){var r=Nr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Nr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&hh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ah(t,e,n){return dr(this,void 0,void 0,(function(){var r,i,o,a,s,u;return vr(this,(function(c){switch(c.label){case 0:return(r=Nr(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new Vo(ei.comparator)).insert(o,gi.newNoDocument(o,Lr.min())),s=Jo().add(o),u=new ta(Lr.min(),new Map,new Bo(Dr),a,s),[4,Eh(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Mh(r),[3,4];case 2:return[4,Vu(r.localStore,e,!1).then((function(){return Ch(r,e,n)})).catch(ou)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function kh(t,e){return dr(this,void 0,void 0,(function(){var n,r,i;return vr(this,(function(o){switch(o.label){case 0:n=Nr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Pu(n.localStore,e)];case 2:return i=o.sent(),Dh(n,r,null),Rh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Uh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ou(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Nh(t,e,n){return dr(this,void 0,void 0,(function(){var r,i;return vr(this,(function(o){switch(o.label){case 0:r=Nr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Nr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return kr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Dh(r,e,n),Rh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Uh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ou(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Oh(t,e){return dr(this,void 0,void 0,(function(){var n,r,i,o,a;return vr(this,(function(s){switch(s.label){case 0:Mc((n=Nr(t)).remoteStore)||Ir("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Nr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=th(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Rh(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Dh(t,e,n){var r=Nr(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Ch(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Ph(t,e)}))}function Ph(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Dc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Mh(t))}function xh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof dh?(t.No.addReference(o.key,e),Lh(t,o)):o instanceof vh?(Ir("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ph(t,o.key)):Ar()}}function Lh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ir("SyncEngine","New document in limbo: "+n),t.So.add(r),Mh(t))}function Mh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ei(jr.fromString(e)),r=t.ko.next();t.Co.set(r,new yh(n)),t.Do=t.Do.insert(n,r),Rc(t.remoteStore,new As(Wi(ji(n.path)),r,2,gr.o))}}function Uh(t,e,n){return dr(this,void 0,void 0,(function(){var r,i,o,a;return vr(this,(function(s){switch(s.label){case 0:return r=Nr(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.$o(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Nu.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return dr(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return vr(this,(function(l){switch(l.label){case 0:n=Nr(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return fs.forEach(e,(function(e){return fs.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return fs.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!gs(r=l.sent()))throw r;return Ir("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,h));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Fh(t,e){return dr(this,void 0,void 0,(function(){var n,r;return vr(this,(function(i){switch(i.label){case 0:return(n=Nr(t)).currentUser.isEqual(e)?[3,3]:(Ir("SyncEngine","User change. New user:",e.toKey()),[4,Cu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new br(yr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Uh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Vh(t,e){var n=Nr(t),r=n.Co.get(e);if(r&&r.bo)return Jo().add(r.key);var i=Jo(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function jh(t,e){return dr(this,void 0,void 0,(function(){var n,r,i;return vr(this,(function(o){switch(o.label){case 0:return[4,ju((n=Nr(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&xh(n,e.targetId,i.To),i)]}}))}))}function qh(t){return dr(this,void 0,void 0,(function(){var e;return vr(this,(function(n){return[2,Bu((e=Nr(t)).localStore).then((function(t){return Uh(e,t)}))]}))}))}function Bh(t,e,n,r){return dr(this,void 0,void 0,(function(){var i,o;return vr(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Nr(t),r=Nr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):fs.resolve(null)}))}))}((i=Nr(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Kc(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Dh(i,e,r||null),Rh(i,e),function(t,e){Nr(Nr(t)._n).Gt(e)}(i.localStore,e)):Ar(),a.label=4;case 4:return[4,Uh(i,o)];case 5:return a.sent(),[3,7];case 6:Ir("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Kh(t,e){return dr(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return vr(this,(function(h){switch(h.label){case 0:return Qh(n=Nr(t)),Yh(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Gh(n,r.toArray())]);case 1:return i=h.sent(),n.Oo=!0,[4,Yc(n.remoteStore,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],Rc(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Ch(n,e),Vu(n.localStore,e,!0)})),Dc(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,Gh(n,u)];case 5:return h.sent(),function(t){var e=Nr(t);e.Co.forEach((function(t,n){Dc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Vo(ei.comparator)}(n),n.Oo=!1,[4,Yc(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function Gh(t,e,n){return dr(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,p,d,v;return vr(this,(function(m){switch(m.label){case 0:n=Nr(t),r=[],i=[],o=0,a=e,m.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Fu(n.localStore,Wi(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),h=0,l=c,m.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,jh(n,p)]):[3,6];case 4:(d=m.sent()).snapshot&&i.push(d.snapshot),m.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,qu(n.localStore,s)];case 8:return v=m.sent(),[4,Fu(n.localStore,v)];case 9:return u=m.sent(),[4,_h(n,Hh(v),s,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Hh(t){return Vi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function zh(t){var e=Nr(t);return Nr(Nr(e.localStore).persistence).fn()}function Wh(t,e,n,r){return dr(this,void 0,void 0,(function(){var i,o,a;return vr(this,(function(s){switch(s.label){case 0:return(i=Nr(t)).Oo?(Ir("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Bu(i.localStore)];case 3:return o=s.sent(),a=ta.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Uh(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Vu(i.localStore,e,!0)];case 6:return s.sent(),Ch(i,e,r),[3,8];case 7:Ar(),s.label=8;case 8:return[2]}}))}))}function Xh(t,e,n){return dr(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return vr(this,(function(p){switch(p.label){case 0:if(!(r=Qh(t)).Oo)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Ir("SyncEngine","Adding an already active target "+a),[3,5]):[4,qu(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,Fu(r.localStore,s)];case 3:return u=p.sent(),[4,_h(r,Hh(s),u.targetId,!1)];case 4:p.sent(),Rc(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return vr(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Vu(r.localStore,t,!1).then((function(){Dc(r.remoteStore,t),Ch(r,t)})).catch(ou)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Qh(t){var e=Nr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Eh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ah.bind(null,e),e.vo._r=uh.bind(null,e.eventManager),e.vo.Mo=ch.bind(null,e.eventManager),e}function Yh(t){var e=Nr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nh.bind(null,e),e}var Jh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return dr(this,void 0,void 0,(function(){return vr(this,(function(e){switch(e.label){case 0:return this.R=wc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Du(this.persistence,new Ou,t.initialUser,this.R)},t.prototype.qo=function(t){return new $u(ec.bs,this.R)},t.prototype.Bo=function(t){return new fc},t.prototype.terminate=function(){return dr(this,void 0,void 0,(function(){return vr(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Zh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return pr(e,t),e.prototype.initialize=function(e){return dr(this,void 0,void 0,(function(){return vr(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ku(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Yh(this.Ko.syncEngine)];case 4:return n.sent(),[4,Kc(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Du(this.persistence,new Ou,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new uu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Su(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new Iu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,yc(),bc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new fc},e}(Jh),$h=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return pr(e,t),e.prototype.initialize=function(e){return dr(this,void 0,void 0,(function(){var n,r=this;return vr(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof lc?(this.sharedClientState.syncEngine={ui:Bh.bind(null,n),ai:Wh.bind(null,n),hi:Xh.bind(null,n),fn:zh.bind(null,n),ci:qh.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return dr(r,void 0,void 0,(function(){return vr(this,(function(e){switch(e.label){case 0:return[4,Kh(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=yc();if(!lc.yt(e))throw new br(yr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Su(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new lc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Zh),tl=function(){function t(){}return t.prototype.initialize=function(t,e){return dr(this,void 0,void 0,(function(){var n=this;return vr(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Sh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fh.bind(null,this.syncEngine),[4,Yc(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new oh},t.prototype.createDatastore=function(t){var e,n=wc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new gc(e));return function(t,e,n){return new Sc(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Sh(a.syncEngine,t,0)},o=dc.yt()?new dc:new pc,new kc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new bh(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return dr(this,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:return e=Nr(t),Ir("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Oc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),el=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),nl=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new ls,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return dr(this,void 0,void 0,(function(){return vr(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return dr(this,void 0,void 0,(function(){return vr(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return dr(this,void 0,void 0,(function(){var t,e,n,r;return vr(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new fh(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return dr(this,void 0,void 0,(function(){var t,e;return vr(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return dr(this,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return dr(this,void 0,void 0,(function(){var t,e;return vr(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return dr(this,void 0,void 0,(function(){var e,n=this;return vr(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new br(yr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return dr(this,void 0,void 0,(function(){var n,r,i,o,a,s;return vr(this,(function(u){switch(u.label){case 0:return n=Nr(t),r=Ia(n.R)+"/documents",i={documents:e.map((function(t){return ya(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){kr(!!e.found),e.found.name,e.found.updateTime;var n=ba(t,e.found.name),r=va(e.found.updateTime),i=new vi({mapValue:{fields:e.found.fields}});return gi.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){kr(!!e.missing),kr(!!e.readTime);var n=ba(t,e.missing),r=va(e.readTime);return gi.newNoDocument(n,r)}(t,e):Ar()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());kr(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new xo(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return dr(this,void 0,void 0,(function(){var t,e=this;return vr(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ei.fromPath(n);e.mutations.push(new Lo(r,e.precondition(r)))})),[4,function(t,e){return dr(this,void 0,void 0,(function(){var n,r,i;return vr(this,(function(o){switch(o.label){case 0:return n=Nr(t),r=Ia(n.R)+"/documents",i={writes:e.map((function(t){return Aa(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ar();e=Lr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new br(yr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?bo.updateTime(e):bo.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Lr.min()))throw new br(yr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bo.updateTime(e)}return bo.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),rl=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new _c(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return dr(t,void 0,void 0,(function(){var t,e,n=this;return vr(this,(function(r){return t=new nl(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Zr(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Uo(e)}return!1},t}(),il=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=nc.UNAUTHENTICATED,this.clientId=Rr.u(),this.credentialListener=function(){},this.receivedInitialUser=new ls,this.credentials.setChangeListener((function(t){Ir("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return dr(this,void 0,void 0,(function(){return vr(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new br(yr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return dr(t,void 0,void 0,(function(){var t,n;return vr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=th(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function ol(t,e){return dr(this,void 0,void 0,(function(){var n,r,i=this;return vr(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ir("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return dr(i,void 0,void 0,(function(){return vr(this,(function(t){switch(t.label){case 0:return[4,Cu(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function al(t,e){return dr(this,void 0,void 0,(function(){var n,r;return vr(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,sl(t)];case 1:return n=i.sent(),Ir("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return dr(this,void 0,void 0,(function(){var n,r;return vr(this,(function(i){switch(i.label){case 0:return(n=Nr(t)).asyncQueue.verifyOperationInProgress(),Ir("RemoteStore","RemoteStore received new credentials"),r=Mc(n),n.$r.add(3),[4,Oc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Nc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function sl(t){return dr(this,void 0,void 0,(function(){return vr(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ir("FirestoreClient","Using default OfflineComponentProvider"),[4,ol(t,new Jh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function ul(t){return dr(this,void 0,void 0,(function(){return vr(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ir("FirestoreClient","Using default OnlineComponentProvider"),[4,al(t,new tl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function cl(t){return sl(t).then((function(t){return t.persistence}))}function hl(t){return sl(t).then((function(t){return t.localStore}))}function ll(t){return ul(t).then((function(t){return t.remoteStore}))}function fl(t){return ul(t).then((function(t){return t.syncEngine}))}function pl(t){return dr(this,void 0,void 0,(function(){var e,n;return vr(this,(function(r){switch(r.label){case 0:return[4,ul(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=wh.bind(null,e.syncEngine),n.onUnlisten=Ih.bind(null,e.syncEngine),n)]}}))}))}function dl(t,e,n){var r=this;void 0===n&&(n={});var i=new ls;return t.asyncQueue.enqueueAndForget((function(){return dr(r,void 0,void 0,(function(){var r;return vr(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new el({next:function(o){e.enqueueAndForget((function(){return sh(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new br(yr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new br(yr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new lh(ji(n.path),o,{includeMetadataChanges:!0,so:!0});return ah(t,a)},[4,pl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function vl(t,e,n){var r=this;void 0===n&&(n={});var i=new ls;return t.asyncQueue.enqueueAndForget((function(){return dr(r,void 0,void 0,(function(){var r;return vr(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new el({next:function(n){e.enqueueAndForget((function(){return sh(t,a)})),n.fromCache&&"server"===r.source?i.reject(new br(yr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new lh(n,o,{includeMetadataChanges:!0,so:!0});return ah(t,a)},[4,pl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var ml=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},gl=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),yl=new Map,bl=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},wl=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(nc.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),_l=function(){function t(t){var e=this;this.oc=null,this.currentUser=nc.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ir("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(kr("string"==typeof n.accessToken),new bl(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return kr(null===t||"string"==typeof t),new nc(t)},t}(),Il=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=nc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Tl=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Il(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(nc.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function El(t,e,n){if(!n)throw new br(yr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Sl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new br(yr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Al(t,e,n,r){if(!0===e&&!0===r)throw new br(yr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function kl(t){if(!ei.isDocumentKey(t))throw new br(yr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Nl(t){if(ei.isDocumentKey(t))throw new br(yr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ol(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ar()}function Rl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new br(yr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ol(t);throw new br(yr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Dl(t,e){if(e<=0)throw new br(yr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Cl=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new br(yr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new br(yr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Al("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Pl=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Cl({}),this._settingsFrozen=!1,t instanceof gl?(this._databaseId=t,this._credentials=new wl):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new br(yr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(t.options.projectId)}(t),this._credentials=new _l(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new br(yr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new br(yr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cl(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new wl;switch(t.type){case"gapi":var e=t.client;return kr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Tl(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new br(yr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=yl.get(this))&&(Ir("ComponentProvider","Removing Datastore"),yl.delete(this),t.terminate()),Promise.resolve();var t},t}(),xl=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ml(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Ll=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ml=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ji(r))||this)._path=r,i.type="collection",i}return pr(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new xl(this.firestore,null,new ei(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Ll);function Ul(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t=(0,i.m9)(t),El("collection","path",e),t instanceof Pl)return Nl(n=jr.fromString.apply(jr,mr([e],r))),new Ml(t,null,n);if(!(t instanceof xl||t instanceof Ml))throw new br(yr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Nl(n=jr.fromString.apply(jr,mr([t.path],r)).child(jr.fromString(e))),new Ml(t.firestore,null,n)}function Fl(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t=(0,i.m9)(t),1===arguments.length&&(e=Rr.u()),El("doc","path",e),t instanceof Pl)return kl(n=jr.fromString.apply(jr,mr([e],r))),new xl(t,null,new ei(n));if(!(t instanceof xl||t instanceof Ml))throw new br(yr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return kl(n=t._path.child(jr.fromString.apply(jr,mr([e],r)))),new xl(t.firestore,t instanceof Ml?t._converter:null,new ei(n))}function Vl(t,e){return t=(0,i.m9)(t),e=(0,i.m9)(e),(t instanceof xl||t instanceof Ml)&&(e instanceof xl||e instanceof Ml)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function jl(t,e){return t=(0,i.m9)(t),e=(0,i.m9)(e),t instanceof Ll&&e instanceof Ll&&t.firestore===e.firestore&&Qi(t._query,e._query)&&t._converter===e._converter}var ql=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new _c(this,"async_queue_retry"),this.Ec=function(){var e=bc();e&&Ir("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=bc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=bc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise((function(t){})):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.dc.push(t),e.Ac()}))},t.prototype.Ac=function(){return dr(this,void 0,void 0,(function(){var t,e=this;return vr(this,(function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!gs(t=n.sent()))throw t;return Ir("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji((function(){return e.Ac()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ic=function(t){var e=this,n=this.fc.then((function(){return e.yc=!0,t().catch((function(t){throw e.mc=t,e.yc=!1,Tr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.yc=!1,t}))}));return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=$c.createAndSchedule(this,t,e,n,(function(t){return r.Rc(t)}));return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Ar()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return dr(this,void 0,void 0,(function(){var t;return vr(this,(function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then((function(){e._c.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()}))},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Bl(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new ls,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Kl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new ql,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return pr(e,t),e.prototype._terminate=function(){return this._firestoreClient||Hl(this),this._firestoreClient.terminate()},e}(Pl);function Gl(t){return t._firestoreClient||Hl(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Hl(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ml(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new il(t._credentials,t._queue,r)}function zl(t,e,n){var r=this,i=new ls;return t.asyncQueue.enqueue((function(){return dr(r,void 0,void 0,(function(){var r;return vr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ol(t,n)];case 1:return o.sent(),[4,al(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===yr.FAILED_PRECONDITION||t.code===yr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Wl(t){if(t._initialized||t._terminated)throw new br(yr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Xl=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new br(yr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Ql=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Gr.fromBase64String(e))}catch(e){throw new br(yr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Gr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Yl=function(t){this._methodName=t},Jl=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new br(yr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new br(yr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Dr(this._lat,t._lat)||Dr(this._long,t._long)},t}(),Zl=/^__.*__$/,$l=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new No(t,this.data,this.fieldMask,e,this.fieldTransforms):new ko(t,this.data,e,this.fieldTransforms)},t}(),tf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new No(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function ef(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ar()}}var nf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Tf(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(ef(this.Dc)&&Zl.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),rf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||wc(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new nf({Dc:t,methodName:e,Lc:n,path:Br.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function of(t){var e=t._freezeSettings(),n=wc(t._databaseId);return new rf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function af(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);bf("Data must be an object, but it was:",a,r);var s,u,c=gf(r,a);if(o.merge)s=new Kr(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=wf(e,f[l],n);if(!a.contains(p))throw new br(yr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Ef(h,p)||h.push(p)}s=new Kr(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new $l(new vi(c),s,u)}var sf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw 1===t.Dc?t.$c(this._methodName+"() can only appear at the top level of your update data"):t.$c(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Yl);function uf(t,e,n){return new nf({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var cf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype._toFieldTransform=function(t){return new go(t.path,new uo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Yl),hf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return pr(e,t),e.prototype._toFieldTransform=function(t){var e=uf(this,t,!0),n=this.qc.map((function(t){return mf(t,e)})),r=new co(n);return new go(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Yl),lf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return pr(e,t),e.prototype._toFieldTransform=function(t){var e=uf(this,t,!0),n=this.qc.map((function(t){return mf(t,e)})),r=new lo(n);return new go(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Yl),ff=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return pr(e,t),e.prototype._toFieldTransform=function(t){var e=new po(t.R,ro(t.R,this.Uc));return new go(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Yl);function pf(t,e,n,r){var o=t.Bc(1,e,n);bf("Data must be an object, but it was:",o,r);var a=[],s=vi.empty();Ur(r,(function(t,r){var u=If(e,t,n);r=(0,i.m9)(r);var c=o.kc(u);if(r instanceof sf)a.push(u);else{var h=mf(r,c);null!=h&&(a.push(u),s.set(u,h))}}));var u=new Kr(a);return new tf(s,u,o.fieldTransforms)}function df(t,e,n,r,o,a){var s=t.Bc(1,e,n),u=[wf(e,r,n)],c=[o];if(a.length%2!=0)throw new br(yr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<a.length;h+=2)u.push(wf(e,a[h])),c.push(a[h+1]);for(var l=[],f=vi.empty(),p=u.length-1;p>=0;--p)if(!Ef(l,u[p])){var d=u[p],v=c[p];v=(0,i.m9)(v);var m=s.kc(d);if(v instanceof sf)l.push(d);else{var g=mf(v,m);null!=g&&(l.push(d),f.set(d,g))}}var y=new Kr(l);return new tf(f,y,s.fieldTransforms)}function vf(t,e,n,r){return void 0===r&&(r=!1),mf(n,t.Bc(r?4:3,e))}function mf(t,e){if(yf(t=(0,i.m9)(t)))return bf("Unsupported field value:",e,t),gf(t,e);if(t instanceof Yl)return function(t,e){if(!ef(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=mf(o[i],e.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,i.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ro(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=xr.fromDate(t);return{timestampValue:fa(e.R,n)}}if(t instanceof xr)return n=new xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:fa(e.R,n)};if(t instanceof Jl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ql)return{bytesValue:pa(e.R,t._byteString)};if(t instanceof xl){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ma(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Ol(t))}(t,e)}function gf(t,e){var n={};return Fr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(t,(function(t,r){var i=mf(r,e.Nc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function yf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof xr||t instanceof Jl||t instanceof Ql||t instanceof xl||t instanceof Yl)}function bf(t,e,n){if(!yf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ol(n);throw"an object"===r?e.$c(t+" a custom object"):e.$c(t+" "+r)}}function wf(t,e,n){if((e=(0,i.m9)(e))instanceof Xl)return e._internalPath;if("string"==typeof e)return If(t,e);throw Tf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var _f=new RegExp("[~\\*/\\[\\]]");function If(t,e,n){if(e.search(_f)>=0)throw Tf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Xl.bind.apply(Xl,mr([void 0],e.split(".")))))._internalPath}catch(r){throw Tf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Tf(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new br(yr.INVALID_ARGUMENT,(s+=". ")+t+u)}function Ef(t,e){return t.some((function(t){return t.isEqual(e)}))}var Sf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new xl(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Af(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(kf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Sf);function kf(t,e){return"string"==typeof e?If(t,e):e instanceof Xl?e._internalPath:e._delegate._internalPath}var Nf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Of=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return pr(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(kf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Sf),Rf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Of),Df=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Nf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Rf(n._firestore,n._userDataWriter,r.key,r,new Nf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new br(yr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Rf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Nf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Rf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Nf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Cf(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Cf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ar()}}function Pf(t,e){return t instanceof Of&&e instanceof Of?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Df&&e instanceof Df&&t._firestore===e._firestore&&jl(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function xf(t){if(Bi(t)&&0===t.explicitOrderBy.length)throw new br(yr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lf=function(){};function Mf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Uf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return pr(e,t),e.prototype._apply=function(t){var e=of(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new br(yr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Gf(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(Kf(r,t,l))}s={arrayValue:{values:u}}}else s=Kf(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Gf(a,o),s=vf(n,"where",a,"in"===o||"not-in"===o);var f=Ti.create(i,o,s);return function(t,e){if(e.g()){var n=Gi(t);if(null!==n&&!n.isEqual(e.field))throw new br(yr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ki(t);null!==r&&Hf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new br(yr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new br(yr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Ll(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Lf),Ff=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return pr(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new br(yr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new br(yr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new xi(e,n);return function(t,e){if(null===Ki(t)){var n=Gi(t);null!==n&&Hf(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Ll(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Fi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Lf),Vf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return pr(e,t),e.prototype._apply=function(t){return new Ll(t.firestore,t._converter,Xi(t._query,this.Gc,this.zc))},e}(Lf),jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return pr(e,t),e.prototype._apply=function(t){var e=Bf(t,this.type,this.Hc,this.Jc);return new Ll(t.firestore,t._converter,function(t,e){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Lf),qf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return pr(e,t),e.prototype._apply=function(t){var e=Bf(t,this.type,this.Hc,this.Jc);return new Ll(t.firestore,t._converter,function(t,e){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Lf);function Bf(t,e,n,r){if(n[0]=(0,i.m9)(n[0]),n[0]instanceof Sf)return function(t,e,n,r,i){if(!r)throw new br(yr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=zi(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(ci(e,r.key));else{var c=r.data.field(u.field);if(Qr(c))throw new br(yr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new br(yr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ci(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var o=of(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new br(yr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new br(yr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Hi(t)&&-1!==c.indexOf("/"))throw new br(yr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(jr.fromString(c));if(!ei.isDocumentKey(h))throw new br(yr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new ei(h);s.push(ci(e,l))}else{var f=vf(n,r,c);s.push(f)}}return new Ci(s,o)}(t._query,t.firestore._databaseId,o,e,n,r)}function Kf(t,e,n){if("string"==typeof(n=(0,i.m9)(n))){if(""===n)throw new br(yr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hi(e)&&-1!==n.indexOf("/"))throw new br(yr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(jr.fromString(n));if(!ei.isDocumentKey(r))throw new br(yr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ci(t,new ei(r))}if(n instanceof xl)return ci(t,n._key);throw new br(yr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ol(n)+".")}function Gf(t,e){if(!Array.isArray(t)||0===t.length)throw new br(yr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new br(yr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Hf(t,e,n){if(!n.isEqual(e))throw new br(yr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var zf=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ni(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Xr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ar()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Ur(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Jl(Wr(t.latitude),Wr(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Yr(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Jr(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=zr(t);return new xr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=jr.fromString(t);kr(qa(n));var r=new gl(n.get(1),n.get(3)),i=new ei(n.popFirst(5));return r.isEqual(e)||Tr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Wf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Xf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return pr(e,t),e.prototype.convertBytes=function(t){return new Ql(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new xl(this.firestore,null,e)},e}(zf),Qf=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=of(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Yf(t,this._firestore),i=Wf(r._converter,e,n),o=af(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,bo.none())),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this._verifyNotCommitted();var a,s=Yf(t,this._firestore);return a="string"==typeof(e=(0,i.m9)(e))||e instanceof Xl?df(this._dataReader,"WriteBatch.update",s._key,e,n,r):pf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,bo.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Yf(t,this._firestore);return this._mutations=this._mutations.concat(new xo(e._key,bo.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new br(yr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Yf(t,e){if((t=(0,i.m9)(t)).firestore!==e)throw new br(yr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Jf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return pr(e,t),e.prototype.convertBytes=function(t){return new Ql(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new xl(this.firestore,null,e)},e}(zf);function Zf(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];t=Rl(t,xl);var a=Rl(t.firestore,Kl),s=of(a);return tp(a,[("string"==typeof(e=(0,i.m9)(e))||e instanceof Xl?df(s,"updateDoc",t._key,e,n,r):pf(s,"updateDoc",t._key,e)).toMutation(t._key,bo.exists(!0))])}function $f(t){for(var e,n,r,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];t=(0,i.m9)(t);var s={includeMetadataChanges:!1},u=0;"object"!=typeof o[u]||Bl(o[u])||(s=o[u],u++);var c,h,l,f={includeMetadataChanges:s.includeMetadataChanges};if(Bl(o[u])){var p=o[u];o[u]=null===(e=p.next)||void 0===e?void 0:e.bind(p),o[u+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),o[u+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof xl)h=Rl(t.firestore,Kl),l=ji(t._key.path),c={next:function(e){o[u]&&o[u](ep(h,t,e))},error:o[u+1],complete:o[u+2]};else{var d=Rl(t,Ll);h=Rl(d.firestore,Kl),l=d._query;var v=new Jf(h);c={next:function(t){o[u]&&o[u](new Df(h,v,d,t))},error:o[u+1],complete:o[u+2]},xf(t._query)}return function(t,e,n,r){var i=this,o=new el(r),a=new lh(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return dr(i,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:return e=ah,[4,pl(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return dr(i,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:return e=sh,[4,pl(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Gl(h),l,f,c)}function tp(t,e){return function(t,e){var n=this,r=new ls;return t.asyncQueue.enqueueAndForget((function(){return dr(n,void 0,void 0,(function(){var n;return vr(this,(function(i){switch(i.label){case 0:return n=Th,[4,fl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Gl(t),e)}function ep(t,e,n){var r=n.docs.get(e._key),i=new Jf(t);return new Of(t,i,e._key,r,new Nf(n.hasPendingWrites,n.fromCache),e._converter)}var np=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return pr(e,t),e.prototype.get=function(e){var n=this,r=Yf(e,this._firestore),i=new Jf(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Of(n._firestore,i,r._key,t._document,new Nf(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=of(t)}return t.prototype.get=function(t){var e=this,n=Yf(t,this._firestore),r=new Xf(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Ar();var i=t[0];if(i.isFoundDocument())return new Sf(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Sf(e._firestore,r,n._key,null,n._converter);throw Ar()}))},t.prototype.set=function(t,e,n){var r=Yf(t,this._firestore),i=Wf(r._converter,e,n),o=af(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a,s=Yf(t,this._firestore);return a="string"==typeof(e=(0,i.m9)(e))||e instanceof Xl?df(this._dataReader,"Transaction.update",s._key,e,n,r):pf(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,a),this},t.prototype.delete=function(t){var e=Yf(t,this._firestore);return this._transaction.delete(e._key),this},t}());function rp(){if("undefined"==typeof Uint8Array)throw new br(yr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ip(){if("undefined"==typeof atob)throw new br(yr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var op=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return ip(),new t(Ql.fromBase64String(e))},t.fromUint8Array=function(e){return rp(),new t(Ql.fromUint8Array(e))},t.prototype.toBase64=function(){return ip(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return rp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),ap=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Wl(t=Rl(t,Kl));var n=Gl(t),r=t._freezeSettings(),i=new tl;return zl(n,i,new Zh(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Wl(t=Rl(t,Kl));var e=Gl(t),n=t._freezeSettings(),r=new tl;return zl(e,r,new $h(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new br(yr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ls;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return dr(e,void 0,void 0,(function(){var e;return vr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return dr(this,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:return ds.yt()?(e=t+"main",[4,ds.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Su(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),sp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof gl||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Rl(t,Pl))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Er("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return dr(e,void 0,void 0,(function(){var e,n;return vr(this,(function(r){switch(r.label){case 0:return[4,cl(t)];case 1:return e=r.sent(),[4,ll(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Nr(t);return e.$r.delete(0),Nc(e)}(n))]}}))}))}))}(Gl(Rl(this._delegate,Kl)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return dr(e,void 0,void 0,(function(){var e,n;return vr(this,(function(r){switch(r.label){case 0:return[4,cl(t)];case 1:return e=r.sent(),[4,ll(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return dr(this,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:return(e=Nr(t)).$r.add(0),[4,Oc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Gl(Rl(this._delegate,Kl)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Al("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ls;return t.asyncQueue.enqueueAndForget((function(){return dr(e,void 0,void 0,(function(){var e;return vr(this,(function(r){switch(r.label){case 0:return e=Oh,[4,fl(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Gl(Rl(this._delegate,Kl)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new el(e);return t.asyncQueue.enqueueAndForget((function(){return dr(n,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:return e=function(t,e){Nr(t).Gr.add(e),e.next()},[4,pl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return dr(n,void 0,void 0,(function(){var e;return vr(this,(function(n){switch(n.label){case 0:return e=function(t,e){Nr(t).Gr.delete(e)},[4,pl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Gl(t=Rl(t,Kl)),Bl(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new br(yr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new _p(this,Ul(this._delegate,t))}catch(t){throw pp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new fp(this,Fl(this._delegate,t))}catch(t){throw pp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new yp(this,function(t,e){if(t=Rl(t,Pl),El("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new br(yr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ll(t,null,function(t){return new Fi(jr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw pp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ls;return t.asyncQueue.enqueueAndForget((function(){return dr(n,void 0,void 0,(function(){var n;return vr(this,(function(i){switch(i.label){case 0:return[4,function(t){return ul(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new rl(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Gl(t),(function(n){return e(new np(t,n))}))}(this._delegate,(function(n){return t(new cp(e,n))}))},t.prototype.batch=function(){var t=this;return Gl(this._delegate),new hp(new Qf(this._delegate,(function(e){return tp(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new br(yr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new br(yr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),up=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return pr(e,t),e.prototype.convertBytes=function(t){return new op(new Ql(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return fp.Zc(e,this.firestore,null)},e}(zf),cp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new up(t)}return t.prototype.get=function(t){var e=this,n=Ip(t);return this._delegate.get(n).then((function(t){return new mp(e._firestore,new Of(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},t.prototype.set=function(t,e,n){var r=Ip(t);return n?(Sl("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Ip(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,mr([a,e,n],i)),this},t.prototype.delete=function(t){var e=Ip(t);return this._delegate.delete(e),this},t}(),hp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Ip(t);return n?(Sl("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Ip(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,mr([a,e,n],i)),this},t.prototype.delete=function(t){var e=Ip(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),lp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Rf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new gp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new up(e),n),i.set(n,o)),o},t}();lp.eu=new WeakMap;var fp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new up(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new br(yr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new xl(n._delegate,r,new ei(e)))},t.Zc=function(e,n,r){return new t(n,new xl(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new _p(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new _p(this.firestore,Ul(this._delegate,t))}catch(t){throw pp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,i.m9)(t))instanceof xl&&Vl(this._delegate,t)},t.prototype.set=function(t,e){e=Sl("DocumentReference.set",e);try{return function(t,e,n){t=Rl(t,xl);var r=Rl(t.firestore,Kl),i=Wf(t._converter,e,n);return tp(r,[af(of(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,bo.none())])}(this._delegate,t,e)}catch(t){throw pp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Zf(this._delegate,t):Zf.apply(void 0,mr([this._delegate,t,e],n))}catch(t){throw pp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return tp(Rl((t=this._delegate).firestore,Kl),[new xo(t._key,bo.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=dp(e),i=vp(e,(function(e){return new mp(t.firestore,new Of(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return $f(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Rl(t,xl);var e=Rl(t.firestore,Kl),n=Gl(e),r=new Jf(e);return function(t,e){var n=this,r=new ls;return t.asyncQueue.enqueueAndForget((function(){return dr(n,void 0,void 0,(function(){var n;return vr(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return dr(this,void 0,void 0,(function(){var r,i;return vr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Nr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new br(yr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=th(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,hl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Of(e,r,t._key,n,new Nf(null!==n&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Rl(t,xl);var e=Rl(t.firestore,Kl);return dl(Gl(e),t._key,{source:"server"}).then((function(n){return ep(e,t,n)}))}(this._delegate):function(t){t=Rl(t,xl);var e=Rl(t.firestore,Kl);return dl(Gl(e),t._key).then((function(n){return ep(e,t,n)}))}(this._delegate)).then((function(t){return new mp(e.firestore,new Of(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(lp.tu(this.firestore,e)):this._delegate.withConverter(null))},t}();function pp(t,e,n){return t.message=t.message.replace(e,n),t}function dp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Bl(r))return r}return{}}function vp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Bl(t[0])?t[0]:Bl(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new fp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Pf(this._delegate,t._delegate)},t}(),gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(mp),yp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new up(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Mf(this._delegate,function(t,e,n){var r=e,i=kf("where",t);return new Uf(i,r,n)}(e,n,r)))}catch(e){throw pp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Mf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=kf("orderBy",t);return new Ff(r,n)}(e,n)))}catch(e){throw pp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Mf(this._delegate,function(t){return Dl("limit",t),new Vf("limit",t,"F")}(e)))}catch(e){throw pp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Mf(this._delegate,function(t){return Dl("limitToLast",t),new Vf("limitToLast",t,"L")}(e)))}catch(e){throw pp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jf("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw pp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jf("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw pp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qf("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw pp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qf("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw pp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return jl(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Rl(t,Ll);var e=Rl(t.firestore,Kl),n=Gl(e),r=new Jf(e);return function(t,e){var n=this,r=new ls;return t.asyncQueue.enqueueAndForget((function(){return dr(n,void 0,void 0,(function(){var n;return vr(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return dr(this,void 0,void 0,(function(){var r,i,o,a,s;return vr(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ju(t,e,!0)];case 1:return s=u.sent(),r=new mh(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=th(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,hl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Df(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Rl(t,Ll);var e=Rl(t.firestore,Kl),n=Gl(e),r=new Jf(e);return vl(n,t._query,{source:"server"}).then((function(n){return new Df(e,r,t,n)}))}(this._delegate):function(t){t=Rl(t,Ll);var e=Rl(t.firestore,Kl),n=Gl(e),r=new Jf(e);return xf(t._query),vl(n,t._query).then((function(n){return new Df(e,r,t,n)}))}(this._delegate)).then((function(t){return new wp(e.firestore,new Df(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=dp(e),i=vp(e,(function(e){return new wp(t.firestore,new Df(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return $f(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(lp.tu(this.firestore,e)):this._delegate.withConverter(null))},t}(),bp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new gp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),wp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new yp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new gp(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new bp(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new gp(n._firestore,r))}))},t.prototype.isEqual=function(t){return Pf(this._delegate,t._delegate)},t}(),_p=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return pr(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new fp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new fp(this.firestore,void 0===t?Fl(this._delegate):Fl(this._delegate,t))}catch(t){throw pp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Rl(t.firestore,Kl),r=Fl(t),i=Wf(t._converter,e);return tp(n,[af(of(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,bo.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new fp(e.firestore,t)}))},e.prototype.isEqual=function(t){return Vl(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(lp.tu(this.firestore,t)):this._delegate.withConverter(null))},e}(yp);function Ip(t){return Rl(t,xl)}var Tp,Ep=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Xl.bind.apply(Xl,mr([void 0],t)))}return t.documentId=function(){return new t(Br.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,i.m9)(t))instanceof Xl&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Sp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new cf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new sf("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lf("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new ff("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Ap=n(886),kp={Firestore:sp,GeoPoint:Jl,Timestamp:xr,Blob:op,Transaction:cp,WriteBatch:hp,DocumentReference:fp,DocumentSnapshot:mp,Query:yp,QueryDocumentSnapshot:gp,QuerySnapshot:wp,CollectionReference:_p,FieldPath:Ep,FieldValue:Sp,setLogLevel:function(t){var e;e=t,wr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Ap.wA("firestore",(function(t){return function(t,e){return new sp(t,new Kl(t,e),new ap)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},kp)))})(Tp=r.Z),Tp.registerVersion("@firebase/firestore","2.2.4")},550:(t,e,n)=>{"use strict";var r=n(983),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function u(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var c=n(448),h=n(886),l="firebasestorage.googleapis.com",f=function(t){function e(n,r){var i=t.call(this,p(n),"Firebase Storage: "+r+" ("+p(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._codeEquals=function(t){return p(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(c.ZR);function p(t){return"storage/"+t}function d(){return new f("unknown","An unknown error occurred, please check the error payload for server response.")}function v(){return new f("canceled","User canceled the upload/download.")}function m(){return new f("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function g(t){return new f("invalid-argument",t)}function y(){return new f("app-deleted","The Firebase app was deleted.")}function b(t){return new f("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function w(t,e){return new f("invalid-format","String does not match format '"+t+"': "+e)}function _(t){throw new f("internal-error","Internal error: "+t)}var I={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},T=function(t,e){this.data=t,this.contentType=e||null};function E(t,e){switch(t){case I.RAW:return new T(S(e));case I.BASE64:case I.BASE64URL:return new T(A(t,e));case I.DATA_URL:return new T((n=new N(e)).base64?A(I.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw w(I.DATA_URL,"Malformed data URL.")}return S(e)}(n.rest),new N(e).contentType)}var n;throw d()}function S(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function A(t,e){switch(t){case I.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw w(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case I.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw w(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw w(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var k,N=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw w(I.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},O={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function R(t){switch(t){case"running":case"pausing":case"canceling":return O.RUNNING;case"paused":return O.PAUSED;case"success":return O.SUCCESS;case"canceled":return O.CANCELED;case"error":default:return O.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(k||(k={}));var D=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=k.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=k.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=k.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw _("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw _("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw _("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw _("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),C=function(){function t(){}return t.prototype.createXhrIo=function(){return new D},t}(),P=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new f("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===l?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var h=u[c],p=h.regex.exec(e);if(p){var d=p[h.indices.bucket],v=p[h.indices.path];v||(v=""),r=new t(d,v),h.postModify(r);break}}if(null==r)throw function(t){return new f("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),x=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function L(t){return"string"==typeof t||t instanceof String}function M(t){return U()&&t instanceof Blob}function U(){return"undefined"!=typeof Blob}function F(t,e,n,r){if(r<e)throw g("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw g("Invalid value for '"+t+"'. Expected "+n+" or less.")}function V(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function j(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var q=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(t){o(t)}else null!==a?((r=d()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?y():v()):o(r=new f("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new B(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function c(){return 2===s}var h=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h||(h=!0,n.apply(null,t))}function f(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new B(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===k.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new B(a,n))}else{var s=n.getErrorCode()===k.ABORT;e(!1,new B(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}(p,c())}),e)}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!h)if(t)l.call.apply(l,u([null,t],e));else{var r;c()||a?l.call.apply(l,u([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),f(r))}}var d=!1;function v(t){d||(d=!0,h||(null!==o?(t||(s=2),clearTimeout(o),f(0)):t||(s=1)))}return f(0),setTimeout((function(){a=!0,v(!0)}),r),v}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),B=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function K(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function G(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=K();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(U())return new Blob(t);throw new f("unsupported-environment","This browser doesn't seem to support creating Blobs")}var H=function(){function t(t,e){var n=0,r="";M(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(M(this.data_)){var r=(i=this.data_,o=e,a=n,i.webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(U()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(G.apply(null,r))}var i=e.map((function(t){return L(t)?E(I.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function z(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function W(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function X(t,e){return e}var Q=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||X},Y=null;function J(){if(Y)return Y;var t=[];t.push(new Q("bucket")),t.push(new Q("generation")),t.push(new Q("metageneration")),t.push(new Q("name","fullPath",!0));var e=new Q("name");e.xform=function(t,e){return function(t){return!L(t)||t.length<2?t:W(t)}(e)},t.push(e);var n=new Q("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Q("timeCreated")),t.push(new Q("updated")),t.push(new Q("md5Hash",null,!0)),t.push(new Q("cacheControl",null,!0)),t.push(new Q("contentDisposition",null,!0)),t.push(new Q("contentEncoding",null,!0)),t.push(new Q("contentLanguage",null,!0)),t.push(new Q("contentType",null,!0)),t.push(new Q("metadata","customMetadata",!0)),Y=t}function Z(t,e,n){var r=z(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new P(n,r);return e._makeStorageReference(i)}})}(r,t),r}(t,r,n)}function $(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var tt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function et(t){if(!t)throw d()}function nt(t,e){return function(n,r){var i=Z(t,r,e);return et(null!==i),i}}function rt(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new f("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new f("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new f("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function it(t){var e=rt(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new f("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function ot(t,e,n){var r=V(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new tt(r,"GET",nt(t,n),i);return o.errorHandler=it(e),o}function at(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=V(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new tt(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=z(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new P(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new P(e,h.name)),r.items.push(s)}return r}(t,e,r)}(t,e,r);return et(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=rt(e),u}function st(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var ut=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function ct(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){et(!1)}return et(!!n&&-1!==(e||["active"]).indexOf(n)),n}var ht=262144;var lt=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function ft(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var pt=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=J(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=st(e,r,i),s={name:a.fullPath},u=V(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=$(a,n),l=t.maxUploadRetryTime,f=new tt(u,"POST",(function(t){var e;ct(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){et(!1)}return et(L(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=rt(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new tt(n,"POST",(function(t){var e=ct(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){et(!1)}n||et(!1);var i=Number(n);return et(!isNaN(i)),new ut(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=rt(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=ht*this._chunkMultiplier,n=new ut(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new ut(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new f("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,p=l+h,d={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},v=r.slice(l,p);if(null===v)throw m();var g=e.maxUploadRetryTime,y=new tt(n,"POST",(function(t,n){var i,a=ct(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?nt(e,o)(t,n):null,new ut(s,c,"final"===a,i)}),g);return y.headers=d,y.body=v.uploadData(),y.progressCallback=s||null,y.errorHandler=rt(t),y}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var a=t._ref.storage._makeRequest(o,i);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){ht*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=ot(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=st(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=H.getBlob(c,r,h);if(null===l)throw m();var f={name:u.fullPath},p=V(o,t.host),d=t.maxUploadRetryTime,v=new tt(p,"POST",nt(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=rt(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=v(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=R(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new lt(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(R(this._state)){case O.SUCCESS:ft(this._resolve.bind(null,this.snapshot))();break;case O.CANCELED:case O.ERROR:ft(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(R(this._state)){case O.RUNNING:case O.PAUSED:t.next&&ft(t.next.bind(t,this.snapshot))();break;case O.SUCCESS:t.complete&&ft(t.complete.bind(t))();break;case O.CANCELED:case O.ERROR:t.error&&ft(t.error.bind(t,this._error))();break;default:t.error&&ft(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),dt=function(){function t(t,e){this._service=t,this._location=e instanceof P?e:P.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new P(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return W(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new P(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw b(t)},t}();function vt(t){var e={prefixes:[],items:[]};return mt(t,e).then((function(){return e}))}function mt(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o;return s(this,(function(a){switch(a.label){case 0:return[4,gt(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,mt(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function gt(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&F("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),r=e||{},i=at(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function yt(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=V(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new tt(r,"GET",function(t,e){return function(n,r){var i=Z(t,r,e);return et(null!==i),function(t,e,n){var r=z(e);if(null===r)return null;if(!L(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return V("/b/"+o(r)+"/o/"+o(i),n)+j({alt:"media",token:e})}))[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=it(e),o}(t.storage,t._location,J()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new f("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function bt(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new P(t._location.bucket,n);return new dt(t.storage,r)}function wt(t){return/^[A-Za-z]+:\/\//.test(t)}function _t(t,e){if(t instanceof Et){var n=t;if(null==n._bucket)throw new f("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new dt(n,n._bucket);return null!=e?_t(r,e):r}if(void 0!==e){if(e.includes(".."))throw g('`path` param cannot contain ".."');return bt(t,e)}return t}function It(t,e){if(e&&wt(e)){if(t instanceof Et)return new dt(t,e);throw g("To use ref(service, url), the first argument must be a Storage instance.")}return _t(t,e)}function Tt(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:P.makeFromBucketSpec(n,t)}var Et=function(){function t(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=l,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?P.makeFromBucketSpec(r,this._host):Tt(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=P.makeFromBucketSpec(this._url,t):this._bucket=Tt(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){F("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){F("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return a(this,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new dt(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new x(y());var r=function(t,e,n,r,i){var o=j(t.urlParams),a=t.url+o,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(s,i),new q(a,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}();function St(t,e){return It(t=(0,c.m9)(t),e)}var At,kt,Nt=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Ot=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Nt(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Nt(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Nt(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Nt(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Rt=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Dt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Dt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Dt=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return bt(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Ot(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new pt(t,new H(e),n)}(t=(0,c.m9)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=I.RAW),this._throwIfRoot("putString");var r=E(e,t),i=o({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Ot(new pt(this._delegate,new H(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return vt(t=(0,c.m9)(t))}(this._delegate).then((function(e){return new Rt(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return gt(t=(0,c.m9)(t),e)}(this._delegate,t||void 0).then((function(t){return new Rt(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return function(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=ot(t.storage,t._location,J()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t=(0,c.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=V(e.fullServerUrl(),t.host),o=$(n,r),a=t.maxOperationRetryTime,s=new tt(i,"PATCH",nt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=it(e),s}(t.storage,t._location,e,J()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}(t=(0,c.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return yt(t=(0,c.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=V(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new tt(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=it(e),i}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t=(0,c.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw b(t)},t}(),Ct=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(wt(t))throw g("ref() expected a child path but got a URL, use refFromURL instead.");return new Dt(St(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!wt(t))throw g("refFromURL() expected a full URL but got a child path, use ref() instead.");try{P.makeFromUrl(t,this._delegate.host)}catch(t){throw g("refFromUrl() expected a valid full URL but got an invalid one.")}return new Dt(St(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();At=r.Z,kt={TaskState:O,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:I,Storage:Et,Reference:Dt},At.INTERNAL.registerComponent(new h.wA("storage",(function(t,e){var n=e.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal");return new Ct(i,new Et(i,o,new C,n,r.Z.SDK_VERSION))}),"PUBLIC").setServiceProps(kt).setMultipleInstances(!0)),At.registerVersion("@firebase/storage","0.5.0")}}]);